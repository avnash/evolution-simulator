(function(t){function e(e){for(var r,a,s=e[0],c=e[1],l=e[2],d=0,p=[];d<s.length;d++)a=s[d],i[a]&&p.push(i[a][0]),i[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],r=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(r=!1)}r&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var r={},i={app:0},o=[];function a(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=r,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)a.d(n,r,function(e){return t[e]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/evolution-simulator/";var s=this["webpackJsonp"]=this["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"00df":function(t,e,n){"use strict";var r=n("913e"),i=n.n(r);i.a},"06a2":function(t,e,n){"use strict";var r=n("a7a6"),i=n.n(r);i.a},"06cf":function(t,e,n){"use strict";var r=n("3e8b"),i=n.n(r);i.a},"0716":function(t,e,n){},"0781":function(t,e,n){"use strict";var r=n("8133"),i=n.n(r);i.a},"09d1":function(t,e,n){"use strict";var r=n("97d9"),i=n.n(r);i.a},"0cd7":function(t,e,n){"use strict";var r=n("ccce"),i=n.n(r);i.a},1247:function(t,e,n){"use strict";var r=n("808b"),i=n.n(r);i.a},1579:function(t,e,n){t.exports=function(){return new Worker(n.p+"0879f00439aa50d2b4ba.worker.js")}},"160b":function(t,e,n){t.exports=n.p+"img/chase.89cddc3d.svg"},1750:function(t,e,n){"use strict";var r=n("b863"),i=n.n(r);i.a},2591:function(t,e,n){},"2e86":function(t,e,n){"use strict";var r=n("ce03"),i=n.n(r);i.a},"2f17":function(t,e,n){"use strict";var r=n("7164"),i=n.n(r);i.a},"308f":function(t,e,n){},3597:function(t,e,n){},"3c26":function(t,e,n){},"3e8b":function(t,e,n){},4678:function(t,e,n){var r={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=o(t);return n(e)}function o(t){if(!n.o(r,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return r[t]}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id="4678"},"4c4f":function(t,e,n){},"53b0":function(t,e,n){t.exports=n.p+"img/reproduce.a99d70c4.svg"},"56d7":function(t,e,n){"use strict";n.r(e);n("7f7f"),n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("AppMessages"),n("router-view")],1)},o=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-messages"},[t._l(t.infos,(function(t){return n("InfoMessage",{key:t.id,attrs:{alert:t}})})),t._l(t.errors,(function(t){return n("ErrorMessage",{key:t.id,attrs:{alert:t}})}))],2)},s=[],c=(n("8e6e"),n("ac6a"),n("456d"),n("bd86")),l=n("2f62"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-hidden"})},d=[];function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var h={name:"ErrorMessage",props:{alert:{type:Object}},watch:{alert:{handler:function(){this.alert&&this.showAlert()},immediate:!0}},methods:f({},Object(l["b"])(["clearError"]),{showAlert:function(){var t=this,e=this.alert;this.$buefy.snackbar.open({message:e.message+(e.context?"<br/>(".concat(e.context,")"):""),duration:e.timeout,indefinite:!e.timeout,position:"is-bottom-right",type:"is-info",actionText:"ok",queue:!0,onAction:function(){var n=e.id;t.clearError({id:n})}})}})},m=h,b=n("2877"),v=Object(b["a"])(m,u,d,!1,null,null,null),g=v.exports,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"is-hidden"})},w=[];function O(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function j(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?O(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={name:"ErrorMessage",props:{alert:{type:Object}},watch:{alert:{handler:function(){this.alert&&this.showAlert()},immediate:!0}},methods:j({},Object(l["b"])(["clearError"]),{showAlert:function(){var t=this,e=this.alert;this.$buefy.snackbar.open({message:'<span class="has-text-danger">Error</span>'+(e.context?" ".concat(e.context,":"):":")+"<br/>"+e.error.message,duration:e.timeout,indefinite:!e.timeout,position:"is-bottom-right",type:"is-danger",actionText:"close",queue:!1,onAction:function(){var n=e.id;t.clearError({id:n})}})}})},x=C,P=Object(b["a"])(x,y,w,!1,null,null,null),_=P.exports;function k(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?k(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var D={name:"AppMessages",props:{},data:function(){return{}},components:{InfoMessage:g,ErrorMessage:_},computed:S({},Object(l["c"])(["errors","infos"])),methods:{}},E=D,$=Object(b["a"])(E,a,s,!1,null,null,null),I=$.exports,T={name:"App",data:function(){return{}},components:{AppMessages:I}},M=T,F=(n("7671"),Object(b["a"])(M,i,o,!1,null,"d8e83a54",null)),z=F.exports,A=n("0284"),N=n.n(A),V=n("9b02"),G=n.n(V),L=n("8c4f"),B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Player",{staticClass:"player",attrs:{playlist:t.playlist,"play-index":t.playIndex,music:t.music},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{ref:"main",staticClass:"main"},[t.viewWidth?n("router-view",{attrs:{"player-loading":e.loading,"view-width":t.viewWidth,"view-height":t.viewHeight}}):t._e()],1),n("div",{staticClass:"panel-bottom"},[n("PlayerControls")],1)]}}])})},R=[],H=(n("20d6"),n("7514"),n("b047c")),W=n.n(H),X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player"},[n("b-loading",{attrs:{"is-full-page":!1,active:t.loading}}),t._t("default",null,{loading:t.loading})],2)},Y=[],q=(n("c5f6"),n("5001")),U=n.n(q),Z=n("1e5c"),Q=n("67bc"),K=n.n(Q),J=(n("a481"),"hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"mozHidden"in document?"mozHidden":null),tt=J&&J.replace(/hidden/i,"visibilitychange"),et=!!J;function nt(t,e){et&&window.addEventListener(tt,t,e)}function rt(t){et&&window.removeEventListener(tt,t)}function it(){return!!et&&document[J]}var ot,at,st=n("0f32"),ct=n.n(st),lt={name:"Player",props:{playlist:{type:Array,required:!0},music:{type:Object},itemType:{type:String,default:"Chapter"},playIndex:{type:Number,default:0}},provide:function(){return{player:this}},components:{},data:function(){return{time:0,totalTime:-1,paused:!0,ended:!1,playlistIndex:0,scrubbing:!1,volume:1,musicVolume:1}},created:function(){var t=this;Z["Howler"].volume(1);var e=U.a.Syncher({getPlaybackRate:function(){return t.howl&&t.howl.rate()},isPlaying:function(){return t.howl&&t.howl.playing()},getTime:function(){return t.howl&&1e3*t.howl.seek()},onFrame:function(e,n,r){var i=r.isPlaying;t.$emit("frame",n),t.howl&&!t.scrubbing&&i&&(t.time=e)}});this.$once("hook:beforeDestroy",(function(){e()})),this.$on("end",(function(){t.paused=!0,t.ended=!0})),this.$on("seek",(function(){t.ended=!1})),this.$on("togglePause",(function(){t.ended=!1}));var n=new K.a;this.$watch("paused",(function(t){t?n.disable():n.enable()}));var r=!1;this.$once("play",(function(){t.musicHowl&&(r=!0,t.musicHowl.play())}));var i=function(){it()?(t.pause(),t.musicHowl&&t.musicHowl.pause()):t.musicHowl&&r&&t.musicHowl.play()};nt(i),this.$on("hook:beforeDestroy",(function(){rt(i)}))},destroyed:function(){this.howls&&this.howls.forEach((function(t){return t.unload()})),this.musicHowl&&this.musicHowl.unload()},watch:{howl:{handler:function(t,e){var n=this;this.totalTime=-1,this.time=0,e&&(e.pause(),e.off()),t.on("load",this.setTotalTime.bind(this)),t.on("loaderror",this.announceError.bind(this)),t.on("play",(function(){n.paused=!1})),t.on("pause",(function(){n.paused=!0})),t.on("end",(function(){n.$emit("end")})),t.on("fade",(function(){n._mlio_volume=null})),t.load().seek(0)},immediate:!0},howls:function(t,e){e&&e.forEach((function(t){return t.unload()}))},volume:function(t){Z["Howler"].volume(t)},musicVolume:function(t){var e=this.musicHowl;e&&e.volume(t*this.music.maxVolume)}},computed:{howls:function(){return this.playlist?this.playlist.filter((function(t){return t.files})).map((function(t){return new Z["Howl"]({src:t.files,preload:!1})})):[]},howl:function(){return this.howls.length?this.howls[this.playIndex]:null},musicHowl:function(){if(this.music)return new Z["Howl"]({src:this.music.audio,preload:!0,loop:!0,volume:this.music.maxVolume})},nowPlaying:function(){return this.playlist?this.playlist[this.playIndex]:{title:""}},loading:function(){return-1===this.totalTime}},methods:{announceError:function(t){console.log(t);var e=t.message||t;this.$ga.exception(e)},setTotalTime:function(){this.totalTime=1e3*this.howl.duration()},togglePlay:function(){this.howl&&(this.paused?this.play():this.pause())},pause:function(){this.howl.pause(),this.$emit("pause"),this.$emit("togglePause",!0)},play:function(){this.howl.play(),this.$emit("play"),this.$emit("togglePause",!1)},previous:function(){this.setTrack(this.playIndex-1)},next:function(){this.setTrack(this.playIndex+1)},setTrack:function(t){if(!(t<0)&&!(t>=this.playlist.length)){var e=this.playlist[t].routeName;this.pause(),this.$router.push({name:e})}},seek:function(t){this.time=t,this.seekAudio(),this.$emit("seek")},seekAudio:ct()((function(){var t=this,e=this.howl._mlio_volume||(this.howl._mlio_volume=this.howl.volume());this.howl.fade(e,0,10),setTimeout((function(){t.howl.seek(t.time/1e3),t.howl.fade(0,e,100)}),10)}),200)}},ut=lt,dt=(n("09d1"),Object(b["a"])(ut,X,Y,!1,null,"69e95553",null)),pt=dt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player-controls",class:{paused:t.player.paused}},[n("AudioScrubber",{attrs:{progress:t.progress},on:{scrub:t.onScrub,scrubstart:function(e){t.player.scrubbing=!0},scrubend:function(e){t.player.scrubbing=!1}}}),n("div",{staticClass:"info"},[n("div",{staticClass:"toc"},[n("b-dropdown",{attrs:{position:"is-top-left"}},[n("div",{staticClass:"button btn-toc is-fullwidth",attrs:{slot:"trigger"},slot:"trigger"},[n("span",[t._v(t._s(t.player.nowPlaying.title))]),n("b-icon",{attrs:{icon:"chevron-up",size:"is-small"}})],1),t._l(t.player.playlist,(function(e,r){return n("b-dropdown-item",{key:e.title,on:{click:function(e){return t.player.setTrack(r)}}},[t._v(t._s(t.player.itemType)+" "+t._s(r+1)+": "+t._s(e.title))])}))],2)],1),n("div",{staticClass:"time-total"},[t._v(t._s(t._f("duration")(t.player.totalTime)))]),n("div",{staticClass:"time-elapsed"},[t._v(t._s(t._f("duration")(t.player.time)))])]),n("div",{staticClass:"controls"},[n("div",{staticClass:"volume"},[n("b-dropdown",{staticClass:"mini",attrs:{"mobile-modal":!1,hoverable:!1,position:"is-top-right"}},[n("div",{staticClass:"button btn-dark",attrs:{slot:"trigger"},slot:"trigger"},[n("b-icon",{attrs:{icon:t.volumeIcon}})],1),n("b-dropdown-item",{staticClass:"no-outline",attrs:{custom:""}},[n("div",{staticClass:"columns is-mobile"},[n("div",{staticClass:"column"},[n("b-icon",{attrs:{icon:"volume-high"}}),n("vue-slider",{staticClass:"slider",attrs:{dotSize:19,height:100,width:8,direction:"btt",tooltip:"none",contained:!0,max:1,min:0,interval:.01},model:{value:t.player.volume,callback:function(e){t.$set(t.player,"volume",e)},expression:"player.volume"}})],1),n("div",{staticClass:"column"},[n("b-icon",{attrs:{icon:"music"}}),n("vue-slider",{staticClass:"slider",attrs:{dotSize:19,height:100,width:8,direction:"btt",tooltip:"none",contained:!0,max:1,min:0,interval:.01},model:{value:t.player.musicVolume,callback:function(e){t.$set(t.player,"musicVolume",e)},expression:"player.musicVolume"}})],1)])])],1)],1),n("div",{staticClass:"btn clickable",class:{disabled:t.player.playIndex<=0},on:{click:t.player.previous}},[n("b-icon",{attrs:{icon:"skip-previous",size:"is-large"}})],1),n("div",{staticClass:"btn clickable",on:{click:t.togglePlay}},[t.player.ended?t._e():n("div",{staticClass:"playpause"}),t.player.ended?n("b-icon",{staticClass:"play-again",attrs:{icon:"replay",size:"is-large"}}):t._e()],1),n("div",{staticClass:"btn clickable",class:{disabled:t.isLast},on:{click:t.player.next}},[n("b-icon",{class:{"pulse-text":!t.isLast&&t.player.ended},attrs:{icon:"skip-next",size:"is-large"}})],1)])],1)},ht=[],mt=n("4971"),bt=n.n(mt),vt=(n("24df"),{name:"AudioScrubber",functional:!0,props:{progress:Number},render:function(t,e){var n=e.props.progress,r={transform:"translate(".concat(n,"%)")},i=function(t){var n=e.listeners[t];if(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];n.apply(null,i)}};return t("div",{class:"scrubber",directives:[{name:"drag",value:function(t){var e=t.el,r=t.layerX,o=r/e.offsetWidth*100;o=Math.min(Math.max(0,o),100),t.first&&i("scrubstart"),t.last&&i("scrubend"),o!==n&&i("scrub",o)}}]},[t("div",{class:"nib",style:r}),t("div",{class:"inner"},[t("div",{class:"progress-bar",style:r})])])}}),gt=vt,yt=(n("0781"),Object(b["a"])(gt,ot,at,!1,null,"364d28c4",null)),wt=yt.exports,Ot={name:"PlayerControls",inject:["player"],props:{},components:{AudioScrubber:wt,vueSlider:bt.a},data:function(){return{}},computed:{progress:function(){return this.player.time/this.player.totalTime*100},isLast:function(){return this.player.playIndex>=this.player.playlist.length-1},volumeIcon:function(){var t=this.player.volume;return 0===t?"volume-off":t<.3?"volume-low":t<.7?"volume-medium":"volume-high"}},methods:{onScrub:function(t){var e=t*this.player.totalTime/100;this.player.seek(e),this.trackScrub()},trackScrub:W()((function(){this.$ga.event("player","scrub",this.player.nowPlaying.title,0|this.player.time)}),1e3),togglePlay:function(){var t=this.player.paused;this.player.togglePlay(),this.$ga.event("player",t?"play":"pause",this.player.nowPlaying.title,0|this.player.time)}}},jt=Ot,Ct=(n("1247"),Object(b["a"])(jt,ft,ht,!1,null,"dd1fd39c",null)),xt=Ct.exports,Pt={name:"PlayerUI",props:{},components:{Player:pt,PlayerControls:xt},data:function(){return{viewWidth:0,viewHeight:0}},created:function(){var t=this,e=W()((function(){return t.getViewDimensions()}),100);window.addEventListener("resize",e,{passive:!0}),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("resize",e)}))},mounted:function(){this.getViewDimensions()},computed:{playlist:function(){var t=this.$router.options.routes.find((function(t){return"player"===t.name}));return t.children.map((function(t){return{routeName:t.name,title:t.meta.title,files:t.meta.audio}}))},playIndex:function(){var t=this.$route.meta.title;return this.playlist.findIndex((function(e){return e.title===t}))},music:function(){var t=this.$router.options.routes.find((function(t){return"player"===t.name}));return t.meta.music}},methods:{getViewDimensions:function(){this.viewWidth=this.$refs.main.offsetWidth,this.viewHeight=this.$refs.main.offsetHeight}}},_t=Pt,kt=(n("bff7"),Object(b["a"])(_t,B,R,!1,null,"112075d2",null)),St=kt.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"about scrollbars"},[n("div",{staticClass:"container"},[n("div",{staticClass:"section"},[n("div",{staticClass:"content"},[t._m(0),n("h2",{staticClass:"title is-size-3"},[t._v("How to use this thing")]),n("p",[t._v("This video will give you a good introduction to the simulator")]),n("responsive-embed",{attrs:{ratio:16/9,"max-width":560}},[n("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/6nMo8T3T0L4",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),n("br"),n("p",[t._v("The idea for this lab came from Primer. This video explains the basics of the model.\n")]),n("responsive-embed",{attrs:{ratio:16/9,"max-width":560}},[n("iframe",{attrs:{width:"560",height:"315",src:"https://www.youtube.com/embed/0ZGbIKd0XrM",frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})]),n("br"),n("p",[t._v("Soon more complex models will be added with different rules... so stay tuned!\n")]),n("h3",{staticClass:"title is-size-3"},[t._v("How to Support my Work")]),n("p",[t._v("I release all content online for free, so user support is the only way I can continue\nmaking things like this. If my work helps you as much as a cup of coffee does,\nconsider supporting current and future work any way you can.\n")]),n("p",[t._v("Besides sharing the apps with others, here are some other ways to help:")]),n("br"),n("div",{staticClass:"columns"},[n("div",{staticClass:"column has-text-centered"},[n("p",[t._v("Donate through "),n("br"),n("a",{staticClass:"button is-info is-medium",attrs:{href:"https://github.com/sponsors/wellcaffeinated",target:"_blank"}},[n("b-icon",{attrs:{icon:"heart"}}),n("span",[t._v("Github Sponsors")])],1)])]),t._m(1)]),n("h2",{staticClass:"title is-size-3"},[t._v("Credits")]),t._m(2),n("p",[t._v("All of the code was written by yours truly (Jasper), but I couldn't\nhave made it look so good without Sarah Berman's artistic direction and\ndrawings.")]),t._m(3),n("h3",{staticClass:"title is-size-3"},[t._v("Source Code")]),t._m(4),n("h3",{staticClass:"title is-size-3"},[t._v("Bug Reports")]),t._m(5)],1)])])])},Et=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"has-text-centered"},[n("div",{staticClass:"is-inline-block"},[n("img",{attrs:{src:"social-thumbnail.jpg",alt:"Evolution Simulator by MinuteLabs.io and Primer"}})]),n("h1",{staticClass:"is-sr-only"},[t._v("Evolution Simulator by MinuteLabs.io and Primer")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column has-text-centered"},[n("p",[t._v("Subscribe on Patreon "),n("br"),n("a",{attrs:{href:"https://www.patreon.com/bePatron?u=617966",target:"_blank"}},[n("img",{attrs:{src:"https://c5.patreon.com/external/logo/become_a_patron_button@2x.png",width:"217",height:"51"}})])])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("The original idea behind this came from\n"),n("a",{attrs:{href:"https://www.youtube.com/watch?v=0ZGbIKd0XrM",target:"_blank"}},[t._v("Primer's wonderful video.")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("And as always, this was made possible by ths support of the\n"),n("a",{attrs:{href:"https://minuteearth.com",target:"_blank"}},[t._v("MinuteEarth team")]),t._v(".\n")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("As always, freely available on\n"),n("a",{attrs:{href:"https://github.com/minutelabsio/evolution-simulator",target:"_blank"}},[t._v("github")]),t._v(".\n")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("If you find a bug, you can post it on\n"),n("a",{attrs:{href:"https://www.patreon.com/minutelabsio",target:"_blank"}},[t._v("patreon")]),t._v(",\n"),n("a",{attrs:{href:"mailto:bugs@minutelabs.io"}},[t._v("email us")]),t._v(",\nor post it on "),n("a",{attrs:{href:"https://github.com/minutelabsio/evolution-simulator",target:"_blank"}},[t._v("github")]),t._v(".")])}],$t=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"responsive-embed-wrap",style:{maxWidth:t.maxWidth+"px"}},[n("div",{staticClass:"responsive-embed",style:{paddingTop:1/t.ratio*100+"%"}},[t._t("default")],2)])},It=[],Tt={name:"responsive-embed",props:{ratio:{type:Number,default:1},maxWidth:Number},data:function(){return{}},components:{},mounted:function(){},methods:{}},Mt=Tt,Ft=(n("be1e"),Object(b["a"])(Mt,$t,It,!1,null,null,null)),zt=Ft.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flower-chart",class:{"show-center-value":t.centerHover,"show-values":t.showValues,"no-hover":t.valuesOutside},style:{width:t.size+"px",height:t.size+"px",transform:"rotate(-0.25turn)"}},[n("svg",{ref:"svg",attrs:{viewBox:t.viewbox,width:t.size,height:t.size}},[n("circle",{staticClass:"outer",attrs:{r:t.valuesOutside?.5:1,fill:"none"}}),n("g",{staticClass:"petals",attrs:{transform:"rotate("+t.globalAngle+")"}},t._l(t.petalSVG,(function(e,r){return n("g",t._b({staticClass:"petal",on:{click:function(e){return t.onPetalClick(r)}}},"g",e.group,!1),[n("path",t._b({staticClass:"hover-area"},"path",e.hoverArea,!1)),n("path",t._b({},"path",e.petal,!1)),n("text",t._b({},"text",e.text,!1),[t._v(t._s(e.label))])])})),0),t.showCenter?n("g",{staticClass:"center",on:{mouseenter:function(e){t.centerHover=!t.showValues},mouseleave:function(e){t.centerHover=!1},click:t.onCenterClick}},[n("circle",{attrs:{r:t.center,fill:t.colors.center}}),n("circle",{staticClass:"hover-area",attrs:{r:"0.3"}}),n("text",{attrs:{transform:"rotate(90)",dy:t.showValues?.03:-.3,"alignment-baseline":"middle"}},[t._v(t._s(t.data.center))])]):t._e()])])},Nt=[],Vt=n("6149"),Gt=n.n(Vt),Lt=2*Math.PI;function Bt(t,e,n){return e===t?1:(n-t)/(e-t)}function Rt(t,e,n){return t*(1-n)+e*n}function Ht(t,e){var n=Math.cos(.5*e),r=Math.sin(.5*e);return"M ".concat(t*n," ").concat(-t*r," A ").concat(t," ").concat(t," 0 0 1 ").concat(t*n," ").concat(t*r," L 0 0")}var Wt={name:"FlowerChart",filters:{fixed:function(t,e){return void 0===t?"":t.toFixed(e)}},props:{size:{type:Number,default:50},data:{type:Object,default:function(){return{}}},colors:{type:Object,default:function(){return{center:"#e6e6e6",petals:Gt.a.scale("Set1").colors(8)}}},dataRanges:{type:Object,default:function(){return{center:[0,1],petals:[0,1]}}},petalWidth:{type:Number,default:1-1/1.618},showValues:{type:Boolean,default:!1},topPetal:{type:Number,default:0},showCenter:{type:Boolean,default:!0},valuesOutside:{type:Boolean,default:!1}},data:function(){return{viewbox:"-1.1 -1.1 2.2 2.2",centerHover:!1}},mounted:function(){},watch:{},computed:{globalAngle:function(){return-360*this.topPetal/this.petals.length},center:function(){return this.centerScale(this.data.center)||0},centerScale:function(){var t=.25,e=this.dataRanges.center,n=e[0],r=e[1];return function(e){return t*Bt(n,r,e)}},petals:function(){var t=this;return(this.data.petals||[]).map((function(e,n){return{value:e,scaled:t.petalScales[n](e)*(t.valuesOutside?.5:1)}}))},petalScales:function(){var t=this.centerScale(this.dataRanges.center[1]),e=this.dataRanges.petals;return this.data.petals.map((function(n,r){var i=e[r];Array.isArray(i)||(i=e);var o=i[0],a=i[1];return function(e){return isNaN(e)||void 0===e?0:Rt(t,1,Bt(o,a,e))}}))},petalSVG:function(){var t=this,e=this.colors.petals,n=e.length,r=this.petals.length,i=r/this.petalWidth,o=Lt/i,a=this.globalAngle;return this.petals.map((function(i,s){var c=e[s%n],l=Ht(i.scaled,o),u=s/r*360,d="rotate(".concat(u,")"),p={transform:d},f={d:l,fill:c};l=Ht(1,Lt/r);var h,m={d:l,fill:c},b=Gt.a.mix(c,t.valuesOutside?"black":"white",.6).css(),v={transform:"translate(0.8, 0) rotate(".concat(-u-a+90,")"),"alignment-baseline":"middle",style:{stroke:b,fill:b}};return h=isNaN(i.value)||void 0===i.value?"N/A":i.value.toFixed(2),{group:p,petal:f,hoverArea:m,text:v,label:h,value:i.value}}))}},methods:{onPetalClick:function(t){var e=this.data.petals[t];this.$emit("select",{petal:!0,index:t,data:e})},onCenterClick:function(){var t=this.data.center;this.$emit("select",{center:!0,data:t})}}},Xt=Wt,Yt=(n("2e86"),Object(b["a"])(Xt,At,Nt,!1,null,"63af28cc",null)),qt=Yt.exports,Ut={name:"About",components:{ResponsiveEmbed:zt,FlowerChart:qt}},Zt=Ut,Qt=(n("af7b"),Object(b["a"])(Zt,Dt,Et,!1,null,"04a8fd05",null)),Kt=Qt.exports,Jt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"playground",class:{"header-bg":"viewscreen"!==t.$route.name}},[t.showConfig?r("SimulationConfig",{staticClass:"cfg scrollbars"}):t._e(),r("transition",{attrs:{name:"slide-down",appear:""}},[t.showIntro?t._e():r("div",{staticClass:"top-bar"},[r("a",{staticClass:"logo",attrs:{href:"https://minutelabs.io",target:"_blank"}},[r("img",{attrs:{src:n("b68a")}})]),r("router-link",{attrs:{to:{name:"about"}}},[r("span",[t._v("About")])]),r("router-link",{attrs:{to:{params:t.$route.params,name:"viewscreen"}}},[r("span",[t._v("World")])]),r("router-link",{attrs:{to:{params:t.$route.params,name:"stats"}}},[r("span",[t._v("Trends")])])],1)]),r("transition",{attrs:{name:"slide-down",appear:""}},[!t.hideSettings&&!t.showIntro||6===t.tourStepNumber?r("div",{staticClass:"center-bar"},[t.showConfig?t._e():r("router-link",{staticClass:"button is-primary is-rounded",attrs:{to:{query:{cfg:t.$route.query.cfg?void 0:"1"}},append:"",exact:""}},[r("span",[t._v("Settings")])])],1):t._e()]),r("div",{staticClass:"upper"},[r("keep-alive",{attrs:{includes:"ViewScreen"}},[r("router-view",{ref:"view"})],1)],1),r("transition",{attrs:{name:"bottom-drawer-slide",appear:""},on:{"after-appear":t.fixLayout,"after-enter":t.fixLayout,"after-leave":t.fixLayout}},[t.hideControls||t.showIntro?t._e():r("div",{staticClass:"bottom-drawer"},[r("div",{staticClass:"floating-more-btn"},[r("b-field",[r("p",{staticClass:"control"},[r("b-tooltip",{attrs:{label:"Run the simulation with a new random seed",position:"is-left"}},[r("b-button",{staticClass:"is-outlined btn-dark",attrs:{loading:t.isContinuing,"icon-right":"dice-5"},on:{click:t.shuffleSimulation}})],1)],1),r("p",{staticClass:"control"},[r("b-tooltip",{attrs:{label:"More Generations...",position:"is-left"}},[r("b-button",{staticClass:"is-outlined btn-dark",attrs:{loading:t.isContinuing,"icon-right":"layers-plus"},on:{click:t.continueSimulation}})],1)],1),r("p",{staticClass:"control"},[r("b-tooltip",{attrs:{label:"Toggle Drawer",position:"is-left"}},[r("b-button",{staticClass:"is-outlined btn-dark",attrs:{"icon-right":t.showBottomDrawer?"menu-down":"menu-up"},on:{click:function(e){t.showBottomDrawer=!t.showBottomDrawer}}})],1)],1)])],1),r("transition",{attrs:{name:"collapse"},on:{"after-enter":t.fixLayout,"after-leave":t.fixLayout}},[t.showBottomDrawer?r("div",{staticClass:"bottom-drawer-content"},[r("b-loading",{staticClass:"loading-overlay",attrs:{"is-full-page":!1,active:t.isLoading}}),r("Drawer",{staticClass:"legend-drawer",attrs:{direction:"right","start-open":t.legendStartsOpen}},[r("Legend",{staticClass:"legend",attrs:{data:t.flowerLegend},on:{select:function(e){return t.propertySelect(e.index)}}},[r("li"),r("li",{staticClass:"clickable has-text-right"},[r("b-tooltip",{attrs:{label:"Flower diagrams show the averages of traits relative to the maximum and minimum values over all generations",position:"is-top",multilined:""}},[r("b-icon",{attrs:{icon:"help-circle"}}),r("span",[t._v("info")])],1)],1)])],1),r("div",{staticClass:"generation-selector",class:{"is-finished":!t.canContinue}},[r("FlowerTimeline",{attrs:{data:t.flowerTimelineData,"data-ranges":t.flowerRanges,colors:t.flowerColors,topPetal:t.topPetal},on:{dataSelect:function(e){t.genIndex===e.generation&&t.propertySelect(e.selected.index)}},scopedSlots:t._u([{key:"before",fn:function(){return[r("div",{staticClass:"flower-timeline-spacer"})]},proxy:!0},t.canContinue?{key:"after",fn:function(){return[r("div",{staticClass:"more-btn"},[r("b-button",{staticClass:"btn-dark",attrs:{loading:t.isContinuing,size:"is-large","icon-right":"layers-plus"},on:{click:t.continueSimulation}})],1),r("div",{staticClass:"flower-timeline-spacer"})]},proxy:!0}:{key:"after",fn:function(){return[r("div",{staticClass:"extinct-status"},[r("img",{attrs:{src:n("dce7"),width:"70"}})]),r("div",{staticClass:"flower-timeline-spacer"})]},proxy:!0}],null,!0),model:{value:t.genIndex,callback:function(e){t.genIndex=e},expression:"genIndex"}})],1)],1):t._e()])],1)])],1)},te=[],ee=(n("8615"),n("0d6d"),Object.freeze({red:"#d20f18",crimson:"#640302",blue:"#1f698e",cyan:"#07C7FB",green:"#b7d65a",lime:"#97F61B",darkGreen:"#246B26",orange:"#f47e18",yellow:"#FDDE3B",violet:"#c86f87",seafoam:"#1cc1aa",cream:"#EEEDD6",ivory:"#FFFDFC",pink:"#e71376",brown:"#23070C",lightBrown:"#643D37",sand:"#615c45",grey:"#5f5e55"})),ne=Object.freeze({speed:ee.red,sense_range:ee.cyan,size:ee.seafoam,life_span:ee.violet,age:ee.yellow,age_at_death:ee.ivory,population:ee.cream,energy:ee.yellow}),re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flower-timeline scrollbars",on:{wheel:t.onScroll}},[n("div",{staticClass:"inner"},[t._t("before"),t._l(t.data,(function(e,r){return n("div",{staticClass:"generation",class:{selected:r===t.selected},on:{click:function(e){t.selected=r}}},[n("FlowerChart",{key:r,attrs:{data:e,"data-ranges":t.dataRanges,size:100,colors:t.colors,"top-petal":t.topPetal},on:{select:function(e){return t.onFlowerSelect(e,r)}}}),n("div",{staticClass:"gen-label no-select"},[t._v(t._s(r+1))])],1)})),t._t("after")],2)])},ie=[],oe=n("f13c"),ae={FlowerChart:qt},se={selected:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},ce={value:{handler:function(){this.focusSelected()},immediate:!0},data:function(t,e){e&&e.length||this.focusSelected()}},le={onScroll:function(t){var e=this.$el;t.deltaY&&(e.scrollLeft+=t.deltaY)},onFlowerSelect:function(t,e){this.$emit("dataSelect",{generation:e,selected:t})},focusSelected:function(){var t=this;this.$nextTick((function(){Object(oe["scrollTo"])(".selected",500,{container:t.$el,x:!0,y:!1,offset:function(e){return-(t.$el.offsetWidth-e.offsetWidth)/2}})}))}},ue={name:"FlowerTimeline",props:{data:Array,dataRanges:Object,colors:Object,topPetal:Number,value:Number},data:function(){return{}},components:ae,computed:se,watch:ce,methods:le},de=ue,pe=(n("bf82"),Object(b["a"])(de,re,ie,!1,null,"2f482d10",null)),fe=pe.exports,he=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"drawer",class:(t={collapsed:!e.isOpen},t["direction-"+e.direction]=!0,t)},[r("button",{staticClass:"collapse-bar",on:{click:function(t){e.isOpen=!e.isOpen}}},[r("b-icon",{attrs:{icon:e.isOpen?e.closeIcon:e.openIcon}})],1),e._t("default")],2)},me=[],be={},ve={isOpen:{get:function(){return void 0===this.open?this.openState:this.open},set:function(t){this.openState=t,this.$emit("update:open",t)}},closeIcon:function(){switch(this.direction){case"right":return"menu-left";case"left":return"menu-right";case"up":return"menu-down";case"down":return"menu-up"}},openIcon:function(){switch(this.direction){case"right":return"menu-right";case"left":return"menu-left";case"up":return"menu-up";case"down":return"menu-down"}}},ge={},ye={},we={name:"Drawer",props:{open:{type:Boolean,default:void 0},startOpen:{type:Boolean},direction:{type:String,validator:function(t){return["right","up","left","down"].indexOf(t)>-1},default:"left"}},data:function(){return{openState:this.startOpen}},components:be,computed:ve,watch:ge,methods:ye},Oe=we,je=(n("06a2"),Object(b["a"])(Oe,he,me,!1,null,"abbc309c",null)),Ce=je.exports,xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"legend"},[t._l(t.data,(function(e,r){return n("li",{staticClass:"clickable",on:{click:function(n){return t.$emit("select",{item:e,index:r})}}},[n("span",{staticClass:"color",style:{"background-color":e.color}}),n("span",[t._v(t._s(t._f("startCase")(e.name)))])])})),t._t("default")],2)},Pe=[],_e={name:"Legend",props:{data:Array}},ke=_e,Se=(n("b26b"),Object(b["a"])(ke,xe,Pe,!1,null,"08042aa2",null)),De=Se.exports,Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"config"},[n("div",{staticClass:"inner"},[n("a",{staticClass:"close",on:{click:t.close}},[n("b-icon",{attrs:{icon:"close-circle-outline",size:"is-large"}})],1),n("div",{staticClass:"content has-text-centered"},[n("h1",{staticClass:"title is-size-3"},[t._v("Simulation Settings")]),n("p",[t._v('Modify the settings then click "Evolve!". '),n("br"),t._v("More details about how this all works can be found in the "),n("router-link",{attrs:{to:{name:"about"},append:""}},[t._v("about page")]),t._v(".")],1)]),n("div",{staticClass:"content"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column has-text-centered"},[n("b-field",{staticClass:"is-inline-block"},[n("div",{staticClass:"number-input-group"},[n("NumberInput",{attrs:{label:"Days to run",min:1,max:2e3,"change-rate":10},model:{value:t.maxGenerations,callback:function(e){t.maxGenerations=e},expression:"maxGenerations"}}),n("NumberInput",{attrs:{label:"Random Seed",min:1,"change-rate":10},model:{value:t.seed,callback:function(e){t.seed=e},expression:"seed"}})],1)])],1)])]),n("div",{staticClass:"content"},[n("div",{staticClass:"has-text-centered"},[n("b-field",[n("b-button",{staticClass:"button is-primary is-large",attrs:{loading:t.isLoading},on:{click:t.run}},[t._v("Evolve!")])],1),n("p",{staticClass:"muted"},[t._v("(by natural selection)")])],1)]),n("b-tabs",{attrs:{position:"is-centered",animated:!1},model:{value:t.tabItem,callback:function(e){t.tabItem=e},expression:"tabItem"}},[n("b-tab-item",{attrs:{label:"Creatures"}},[n("b-tabs",{attrs:{type:"is-toggle",position:"is-centered",animated:!1}},t._l(t.creatureConfigs,(function(e,r){return n("b-tab-item",{key:r,attrs:{label:e.name},scopedSlots:t._u([{key:"header",fn:function(){return[n("span",[t._v(t._s(e.name)+" Blobs ")]),"default"!==r?n("b-icon",{class:e.active?"has-text-success":"has-text-danger",attrs:{icon:e.active?"check":"cancel",size:"is-small"}}):t._e()]},proxy:!0}],null,!0)},[n("div",{staticClass:"content"},[n("CreatureTemplateConfig",{attrs:{species:r}})],1)])})),1)],1),n("b-tab-item",{attrs:{label:"Food"}},[n("div",{staticClass:"content"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column has-text-right-tablet has-text-centered"},[n("p",[t._v("We will randomly place this much food to start")]),n("div",{staticClass:"is-inline-block"},[n("NumberInput",{attrs:{label:"Food",min:0,max:1e3,"change-rate":10,condensed:"",color:t.foodColor},model:{value:t.foodPerGeneration,callback:function(e){t.foodPerGeneration=e},expression:"foodPerGeneration"}})],1)]),n("div",{staticClass:"column has-text-left-tablet has-text-centered"},[n("p",[t._v("And can change the food over time..."),n("br"),n("span",{staticClass:"muted"},[t._v("(click the graph to add control points)")])]),1===t.tabItem?n("div",{staticClass:"is-inline-block"},[n("FoodControl")],1):t._e()])])])])],1)],1)])},$e=[],Ie=(n("ac4d"),n("8a81"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"number-input control input",class:{condensed:t.condensed},on:{click:function(e){return t.$refs.input.focus()}}},[n("div",{staticClass:"label"},[n("span",[t._v(t._s(t.label))])]),n("div",{staticClass:"controls"},[n("div",{staticClass:"slider"},[n("vue-slider",{attrs:{min:-1,max:1,interval:.1,tooltip:"none",process:t.sliderProcess,contained:!0},on:{"drag-start":function(e){return t.sliderDrag(!0)},change:function(e){return t.sliderDrag(t.sliderIsDragging)},"drag-end":function(e){return t.sliderDrag(!1)}},model:{value:t.sliderValue,callback:function(e){t.sliderValue=e},expression:"sliderValue"}})],1),n("div",{staticClass:"in"},[n("input",{directives:[{name:"model",rawName:"v-model.number",value:t.displayValue,expression:"displayValue",modifiers:{number:!0}}],ref:"input",attrs:{type:"number",step:t.step},domProps:{value:t.displayValue},on:{input:function(e){e.target.composing||(t.displayValue=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})])])])}),Te=[];function Me(t,e){var n=Math.max(0,"".concat(e).length-2);return+(Math.round(t/e)*e).toFixed(n)}var Fe={name:"NumberInput",props:{label:String,value:Number,condensed:Boolean,color:[String,Number],trueColor:Boolean,step:{type:Number,default:1},changeRate:{type:Number,default:10},min:{type:Number},max:{type:Number}},data:function(){return{sliderValue:0,sliderIsDragging:!1,sliderProcess:function(t){return[[50,t[0]]]}}},components:{},created:function(){this.lastUpdate=0},mounted:function(){},computed:{backgroundColor:function(){return this.color?Gt()(this.color).alpha(this.trueColor?.8:.15):""},borderColor:function(){return this.color?Gt()(this.color).alpha(this.trueColor?.8:.3):""},displayValue:{get:function(){return this.sanitizeValue(this.value)},set:function(t){this.$emit("input",this.sanitizeValue(t))}}},watch:{sliderIsDragging:function(t){t&&this.changeValue()},borderColor:{handler:function(t){var e=this;t&&this.$nextTick((function(){e.$el.style.setProperty("--border-color",t.css()),e.$el.style.setProperty("--border-color-hover",t.alpha(e.trueColor?1:.4).css()),e.$el.style.setProperty("--border-color-focus",t.alpha(e.trueColor?1:.6).css())}))},immediate:!0}},methods:{sanitizeValue:function(t){return t=Me(t,this.step),void 0!==this.min&&(t=Math.max(this.min,t)),void 0!==this.max&&(t=Math.min(this.max,t)),t},sliderDrag:function(t){var e=this;this.sliderIsDragging=!!t,!t&&this.sliderValue&&this.$nextTick((function(){e.sliderValue=0}))},changeValue:ct()((function(){if(this.sliderIsDragging){var t=window.performance.now(),e=50,n=0,r=this.sliderValue;if(0===r)return this.changeValue();var i=r*r*this.changeRate/10,o=this.step/i;o>1&&(n=Math.min(o*e,1e3)),+this.lastUpdate+n<t&&(this.displayValue+=Math.max(this.step,i)*(r>=0?1:-1),this.lastUpdate=t),this.changeValue()}}),50)}},ze=Fe,Ae=(n("66cc"),n("6ea1"),Object(b["a"])(ze,Ie,Te,!1,null,"63f5f686",null)),Ne=Ae.exports,Ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"creature-template-config"},[n("div",{staticClass:"content"},["default"!==t.species?n("p",{staticClass:"has-text-centered"},[n("b-switch",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[t._v("Enabled")])],1):n("p",{staticClass:"has-text-centered"},[t._v("(Always enabled)")])]),t.active?[n("div",{staticClass:"content"},[n("div",{staticClass:"columns"},[t._m(0),n("div",{staticClass:"column has-text-left-tablet has-text-centered"},[n("div",{staticClass:"is-inline-block"},[n("NumberInput",{attrs:{label:"Num. Blobs at Start",min:1,max:1e3,"change-rate":10,condensed:"",color:t.creatureColors[t.species],"true-color":""},model:{value:t.creatureCount,callback:function(e){t.creatureCount=e},expression:"creatureCount"}})],1)])]),n("div",{staticClass:"content"},[n("div",{staticClass:"columns"},[t._m(1),n("div",{staticClass:"column has-text-left-tablet has-text-centered"},[n("div",{staticClass:"is-inline-block"},[n("NumberInput",{attrs:{label:"Energy",min:0,"change-rate":100,condensed:"",color:t.traitColors.energy},model:{value:t.energy,callback:function(e){t.energy=e},expression:"energy"}})],1)])])]),n("div",{staticClass:"columns"},[t._m(2),n("div",{staticClass:"column has-text-left-tablet has-text-centered"},[n("div",{staticClass:"is-inline-block"},[n("div",{staticClass:"number-input-group"},[n("NumberInput",{attrs:{label:"Speed",min:.05,"change-rate":10,color:t.traitColors.speed},model:{value:t.speedValue,callback:function(e){t.speedValue=e},expression:"speedValue"}}),n("NumberInput",{attrs:{label:"Size",min:.05,"change-rate":10,color:t.traitColors.size},model:{value:t.sizeValue,callback:function(e){t.sizeValue=e},expression:"sizeValue"}}),n("NumberInput",{attrs:{label:"Sense Range",min:.01,"change-rate":10,color:t.traitColors.sense_range},model:{value:t.sense_rangeValue,callback:function(e){t.sense_rangeValue=e},expression:"sense_rangeValue"}})],1)]),n("p",{staticClass:"warning"},[n("b-icon",{attrs:{icon:"alert-box-outline"}}),n("span",[t._v("Caution: setting these values too low without also lowering the energy will result in a very long calculation.")])],1)])]),n("div",{staticClass:"columns"},[t._m(3),n("div",{staticClass:"column has-text-left-tablet has-text-centered"},[n("div",{staticClass:"is-inline-block"},[n("div",{staticClass:"number-input-group"},[n("NumberInput",{attrs:{label:"σ² Speed",min:0,max:10,"change-rate":1,step:.1,color:t.traitColors.speed},model:{value:t.speedVariance,callback:function(e){t.speedVariance=e},expression:"speedVariance"}}),n("NumberInput",{attrs:{label:"σ² Size",min:0,max:10,"change-rate":1,step:.1,color:t.traitColors.size},model:{value:t.sizeVariance,callback:function(e){t.sizeVariance=e},expression:"sizeVariance"}}),n("NumberInput",{attrs:{label:"σ² Sense",min:0,max:10,"change-rate":1,step:.1,color:t.traitColors.sense_range},model:{value:t.sense_rangeVariance,callback:function(e){t.sense_rangeVariance=e},expression:"sense_rangeVariance"}})],1)])])])])]:t._e()],2)},Ge=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column has-text-right-tablet has-text-centered"},[n("p",[t._v("Start with this many creatures")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column has-text-right-tablet has-text-centered"},[n("p",[t._v("Creatures will start with this much energy")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column has-text-right-tablet has-text-centered"},[n("p",[t._v("and each creature will start with these properties")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"column has-text-right-tablet has-text-centered"},[n("p",[t._v("The traits will mutate by randomly selecting a value\n(in a gaussian normal distribution) centered around their current trait value\nwith a variance of...")])])}],Le={default:Gt()(ee.blue).desaturate(.5).num(),orange:Gt()(ee.orange).num(),pink:Gt()(ee.pink).num()};function Be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Be(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function He(t){var e={},n=!0,r=!1,i=void 0;try{for(var o,a=function(){var t=o.value;e[t+"Value"]={get:function(){return this[t][0]},set:function(e){this[t]=[e,this[t+"Variance"]]}},e[t+"Variance"]={get:function(){return this[t][1]},set:function(e){this[t]=[this[t+"Value"],e]}},e[t]={get:function(){return this.creatureTemplate(this.species)[t]},set:function(e){var n;this.$store.dispatch("simulation/setCreatureTemplate",(n={},Object(c["a"])(n,t,e),Object(c["a"])(n,"species",this.species),n))}}},s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)a()}catch(l){r=!0,i=l}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return e}var We={name:"CreatureTemplateConfig",props:{species:{type:String,default:"default"}},data:function(){return{traitColors:ne,creatureColors:Le}},components:{NumberInput:Ne},mounted:function(){},computed:Re({},Object(l["c"])("simulation",{config:"config",creatureTemplate:"creatureTemplate"}),{active:{get:function(){return this.$store.getters["simulation/creatureConfig"](this.species).active},set:function(t){this.$store.dispatch("simulation/setCreatureConfig",{active:t,species:this.species})}},creatureCount:{get:function(){return this.$store.getters["simulation/creatureConfig"](this.species).count},set:function(t){this.$store.dispatch("simulation/setCreatureConfig",{count:t,species:this.species})}},energy:{get:function(){return this.$store.getters["simulation/creatureTemplate"](this.species).energy},set:function(t){this.$store.dispatch("simulation/setCreatureTemplate",{energy:t,species:this.species})}}},He(["speed","size","sense_range","reach","life_span"])),watch:{},methods:{}},Xe=We,Ye=(n("0cd7"),Object(b["a"])(Xe,Ve,Ge,!1,null,"28527534",null)),qe=Ye.exports,Ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"food-control"},[n("b-field",{staticClass:"ctrls",attrs:{grouped:""}},[n("b-tooltip",{attrs:{label:"Clear",position:"is-top"}},[n("b-button",{staticClass:"btn-dark",attrs:{size:"is-small","icon-left":"delete"},on:{click:function(e){t.data=[],t.commit()}}},[n("span",[t._v("clear")])])],1),n("b-checkbox-button",{staticClass:"checkbox-btn-dark",attrs:{size:"is-small"},model:{value:t.showGraph,callback:function(e){t.showGraph=e},expression:"showGraph"}},[t.showGraph?n("span",[t._v("edit values")]):n("span",[t._v("show graph")])])],1),t.showGraph?n("div",{staticClass:"plot"},[n("FoodPlot",{ref:"foodPlot",attrs:{data:t.foodPlotData,styles:{height:"160px"},tooltips:!1},nativeOn:{mousedown:function(e){return t.setControlPointOnInteract(e)},mousemove:function(e){return t.setControlPointOnInteract(e)}}})],1):n("div",{staticClass:"cols"},[t._m(0),n("div",{staticClass:"inner scrollbars"},t._l(t.data,(function(e,r){return n("div",{staticClass:"col"},[n("b-input",{attrs:{type:"text",disabled:0===r},on:{blur:t.commit},model:{value:e[0],callback:function(n){t.$set(e,0,t._n(n))},expression:"entry[0]"}}),n("b-input",{attrs:{type:"text",disabled:0===r},on:{blur:t.commit},model:{value:e[1],callback:function(n){t.$set(e,1,t._n(n))},expression:"entry[1]"}})],1)})),0),n("div",{staticClass:"col btns"},[n("div",{staticClass:"mid"},[n("b-tooltip",{attrs:{label:"Add a control point",position:"is-top"}},[n("b-button",{staticClass:"btn-dark",on:{click:t.addCol}},[n("b-icon",{attrs:{icon:"plus"}})],1)],1)],1)])])],1)},Ze=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col"},[n("label",[t._v("Gen.:")]),n("label",[t._v("Food:")])])}],Qe=(n("55dd"),n("fca0"),n("768b")),Ke=n("db1a"),Je=n.n(Ke),tn=n("2769"),en=n.n(tn),nn=n("4d8c"),rn=n.n(nn),on=n("1fca");function an(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function sn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?an(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var cn,ln,un={name:"FoodPlot",extends:on["b"],props:{data:{type:Array},label:{type:String},textColor:{type:String,default:"#FCFDF4"},responsive:{type:Boolean,default:!0},stacked:{type:Boolean,default:!1},tooltips:{type:Boolean,default:!0},maxFood:Number},components:{},data:function(){return{}},computed:{options:function(){return{responsive:this.responsive,maintainAspectRatio:!1,hoverMode:"index",animation:{duration:0},tooltips:{enabled:this.tooltips,intersect:!1,mode:"index",position:"nearest",callbacks:{label:function(t,e){var n=t.datasetIndex,r=e.datasets[n].label;return"".concat(r,": ").concat(t.yLabel.toFixed(0))},title:function(t){var e=t[0].xLabel;return"Generation: "+e}}},scales:{xAxes:[{display:!0,ticks:{min:1,fontColor:this.textColor}}],yAxes:[{type:"linear",display:!0,ticks:{fontColor:this.textColor,max:this.maxFood,beginAtZero:!0},stacked:this.stacked,position:"left",scaleLabel:{display:!0,labelString:"Foods",fontColor:this.textColor,fontSize:16}}]},legend:{display:!1},elements:{line:{borderWidth:1,tension:0}}}},chartdata:function(){if(!this.data)return{};var t={showLine:!0,pointRadius:1,fill:!1},e=this.data.map((function(e){return sn({},t,{borderColor:e.color,backgroundColor:e.color},e,{data:e.data?e.data.map((function(t){return{x:t[0],y:t[1]}})):[]})}));return{datasets:e}}},watch:{chartdata:function(){this.render()},options:function(){this.render()}},mounted:function(){var t=this;this.render();var e=function(){var e=t._data._chart.tooltip;if(e._active){var n=e._active[0]._index+1;t.$emit("click",n)}};this.$el.addEventListener("click",e),this.$on("hook:beforeDestroy",(function(){t.$el.removeEventListener("click",e)}))},methods:{render:function(){this._inactive||(this.options.scales.xAxes[0].max=this.chartdata.length,this.renderChart(this.chartdata,this.options))},getCoordsAtEvent:function(t){var e=this.$data._chart,n=e.chartArea.top,r=e.chartArea.bottom,i=e.scales["y-axis-1"].min,o=e.scales["y-axis-1"].max,a=0;t.offsetY<=r&&t.offsetY>=n&&(a=Math.abs((t.offsetY-n)/(r-n)),a=-1*(a-1),a=a*Math.abs(o-i)+i);var s=e.chartArea.left,c=e.chartArea.right,l=e.scales["x-axis-1"].min,u=e.scales["x-axis-1"].max,d=0;return t.offsetX<=c&&t.offsetX>=s&&(d=Math.abs((t.offsetX-s)/(c-s)),d=d*Math.abs(u-l)+l),[d,a]}}},dn=un,pn=Object(b["a"])(dn,cn,ln,!1,null,"29bcd116",null),fn=pn.exports;function hn(t,e,n){return t*(1-n)+e*n}function mn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.useSpline,r=void 0!==n&&n,i=t.length,o=t[0],a=t[i-2];return t=r?bn(t,e.tension,e.isClosed,e.numOfSegments):t,function(e){e=Math.max(o,Math.min(a,e));var n=0,r=t[0];while(e>=r)n+=2,r=t[n];if(0===n)return t[1];if(n===i)return t[i-1];var s=t[n-2],c=t[n];if(s===c)return t[n+1];var l=(e-s)/(c-s);return hn(t[n-1],t[n+1],l)}}function bn(t){var e,n,r,i,o,a,s,c,l,u,d,p,f,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,m=arguments.length>2&&void 0!==arguments[2]&&arguments[2],b=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16,v=[],g=[];for(v=t.slice(0),m?(v.unshift(t[t.length-1]),v.unshift(t[t.length-2]),v.unshift(t[t.length-1]),v.unshift(t[t.length-2]),v.push(t[0]),v.push(t[1])):(v.unshift(t[1]),v.unshift(t[0]),v.push(t[t.length-2]),v.push(t[t.length-1])),f=2;f<v.length-4;f+=2)for(p=0;p<=b;p++){r=(v[f+2]-v[f-2])*h,i=(v[f+4]-v[f])*h,o=(v[f+3]-v[f-1])*h,a=(v[f+5]-v[f+1])*h,d=p/b;var y=d*d,w=y*d;s=2*w-3*y+1,c=-2*w+3*y,l=w-2*y+d,u=w-y,e=s*v[f]+c*v[f+2]+l*r+u*i,n=s*v[f+1]+c*v[f+3]+l*o+u*a,g.push(e),g.push(n)}return g}function vn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function gn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vn(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yn=ee.green,wn={FoodPlot:fn},On=gn({},Object(l["c"])("simulation",{config:"config"}),{foodPlotData:function(){var t=mn(rn()(this.data)),e=Je()(this.config.max_generations,(function(e){return[e,Math.round(t(e))]}));return[{label:"Available Food",color:yn,data:e}]}}),jn={"config.food_per_generation":{handler:function(t){this.data=t.map((function(t){var e=Object(Qe["a"])(t,2),n=e[0],r=e[1];return[n+1,r]}))},immediate:!0}},Cn={addCol:function(){var t=this.data[this.data.length-1];this.data.push([t[0]+1,t[1]]),this.commit()},commit:ct()((function(){this.data=this.data.filter((function(t){return Number.isFinite(t[0])&&Number.isFinite(t[1])&&t[0]>1})),this.data.sort((function(t,e){return t[0]-e[0]})),this.data.unshift([1,this.config.food_per_generation[0][1]]),this.$store.dispatch("simulation/setConfig",{food_per_generation:this.data.map((function(t){var e=Object(Qe["a"])(t,2),n=e[0],r=e[1];return[n-1,r]}))})}),10),setControlPointOnInteract:function(t){if(t.buttons){var e=this.$refs.foodPlot.getCoordsAtEvent(t),n=Object(Qe["a"])(e,2),r=n[0],i=n[1];r=Math.round(r),i=Math.round(i);var o=en()(this.data,(function(t){return t[0]===r}));o?o[1]=i:this.data.push([r,i]),this.commit()}}},xn={name:"FoodControl",props:{},data:function(){return{data:[[1,50]],foodColor:yn,showGraph:!0}},components:wn,computed:On,watch:jn,methods:Cn},Pn=xn,_n=(n("664e"),Object(b["a"])(Pn,Ue,Ze,!1,null,"46acf317",null)),kn=_n.exports;function Sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function En(t,e,n){return{get:function(){return this[e][t]},set:function(e){this.$store.dispatch(n,Object(c["a"])({},t,e))}}}function $n(t,e){var n={},r=!0,i=!1,o=void 0;try{for(var a,s=function(){var t=a.value;n[t+"Value"]={get:function(){return this[t][0]},set:function(e){this[t]=[e,this[t+"Variance"]]}},n[t+"Variance"]={get:function(){return this[t][1]},set:function(e){this[t]=[this[t+"Value"],e]}},n[t]={get:function(){return this.creatureTemplate(e)[t]},set:function(n){var r;this.$store.dispatch("simulation/setCreatureTemplate",(r={},Object(c["a"])(r,t,n),Object(c["a"])(r,"species",e),r))}}},l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)s()}catch(u){i=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}var In={name:"SimulationConfig",props:{},data:function(){return{traitColors:ne,foodColor:ee.green,tabItem:0,presetOptions:{}}},components:{NumberInput:Ne,CreatureTemplateConfig:qe,FoodControl:kn},mounted:function(){var t=this;this.presetOptions=Dn({},this.config.preset.options),this.$watch("presetOptions",(function(){t.$store.dispatch("simulation/setConfig",{preset:Dn({},t.config.preset,{options:t.presetOptions})})}),{deep:!0})},computed:Dn({},Object(l["c"])("simulation",{isLoading:"isLoading",config:"config",creatureTemplate:"creatureTemplate",presets:"presets"}),{creatureConfigs:function(){return this.$store.state.simulation.creatureConfigs},currentPreset:{get:function(){return this.config.preset.name},set:function(t){this.$store.dispatch("simulation/setConfig",{preset:Dn({},this.config.preset,{name:t})})}},seed:En("seed","config","simulation/setConfig"),maxGenerations:En("max_generations","config","simulation/setConfig"),foodPerGeneration:{get:function(){return this.$store.getters["simulation/config"].food_per_generation[0][1]},set:function(t){var e=this.$store.getters["simulation/config"].food_per_generation.slice();e[0][1]=t,this.$store.dispatch("simulation/setConfig",{food_per_generation:e})}},creatureCount:{get:function(){return this.$store.getters["simulation/creatureConfig"]("default").count},set:function(t){this.$store.dispatch("simulation/setCreatureConfig",{count:t,species:"default"})}},energy:{get:function(){return this.$store.getters["simulation/creatureTemplate"]("default").energy},set:function(t){this.$store.dispatch("simulation/setCreatureTemplate",{energy:t,species:"default"})}}},$n(["speed","size","sense_range","reach","life_span"],"default")),watch:{},methods:{run:function(){var t=this;this.$store.dispatch("simulation/run").then((function(){t.close()}))},close:function(){this.$route.query.cfg&&this.$router.replace({params:this.$route.params,query:Dn({},this.$route.query,{cfg:""})})}}},Tn=In,Mn=(n("1750"),Object(b["a"])(Tn,Ee,$e,!1,null,"fd2e3e02",null)),Fn=Mn.exports;function zn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zn(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Nn={name:"Simulation",props:{showConfig:Boolean,showIntro:Number,hideControls:Boolean,hideSettings:Boolean},components:{FlowerChart:qt,FlowerTimeline:fe,Legend:De,Drawer:Ce,SimulationConfig:Fn},data:function(){return{toolbar:!0,showBottomDrawer:!0,topPetal:0,legendStartsOpen:window.innerWidth>620}},created:function(){},mounted:function(){var t=this;this.$nextTick((function(){var e=t.generationIndex;if(e){var n=Math.max(e+1,t.config.max_generations);t.$store.dispatch("simulation/setConfig",{max_generations:n})}t.generation||t.run(!1)}))},watch:{},computed:An({tourStepNumber:function(){return 0|this.$route.query.intro},flowerColors:function(){return{center:ne.population,petals:this.traitColors}},generationStats:function(){return this.stats?this.stats.generation_statistics:[]},flowerData:function(){if(!this.stats)return{};var t=this.generationStats[this.genIndex];return{center:t.population,petals:this.traits.map((function(e){return t[e].mean}))}},flowerTimelineData:function(){var t=this;if(!this.stats)return[];var e=this.generationStats;return e.map((function(e){return{center:e.population,petals:t.traits.map((function(t){return e[t].mean}))}}))},flowerRanges:function(){if(!this.stats)return{};var t=this.stats.population;return{center:[t.min,t.max],petals:this.flowerTimelineData.reduce((function(t,e){return e.petals.map((function(e,n){return[Math.min(e,t[n][0]),Math.max(e,t[n][1])]}))}),this.flowerTimelineData[0].petals.map((function(t){return[t,t]})))}},flowerLegend:function(){var t=this;return Object.values(this.traits).map((function(e,n){return{name:e,color:t.flowerColors.petals[n]}})).concat([{name:"population",color:this.flowerColors.center}])},genIndex:{get:function(){return this.generationIndex},set:function(t){this.loadGeneration(t)}},generation:function(){return this.getCurrentGeneration()}},Object(l["c"])("simulation",{canContinue:"canContinue",isLoading:"isLoading",isContinuing:"isContinuing",getCurrentGeneration:"getCurrentGeneration",generationIndex:"currentGenerationIndex",config:"config",stats:"statistics",traits:"traits",traitColors:"traitColors"})),methods:{run:function(t){return this.$store.dispatch("simulation/run",t)},continueSimulation:function(){return this.$store.dispatch("simulation/continue")},shuffleSimulation:function(){var t=1e3*Math.random()|0;this.$store.dispatch("simulation/setConfig",{seed:t}),this.run()},loadGeneration:function(t){this.$store.dispatch("simulation/loadGeneration",t)},propertySelect:function(t){void 0!==t&&t<this.traits.length&&(this.topPetal=t)},fixLayout:function(){var t=this.$refs.view;t.fixLayout&&t.fixLayout()}}},Vn=Nn,Gn=(n("b829"),Object(b["a"])(Vn,Jt,te,!1,null,"890a57a6",null)),Ln=Gn.exports,Bn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"simulation-statistics scrollbars"},[n("div",{staticClass:"columns"},[n("div",{staticClass:"column is-one-half"},[n("b-field",{attrs:{label:"Filter By Species"}},[n("b-select",{model:{value:t.statsSpeciesFilter,callback:function(e){t.statsSpeciesFilter=e},expression:"statsSpeciesFilter"}},t._l(t.speciesFilterList,(function(e,r){return n("option",{key:e[1],domProps:{value:r}},[t._v(t._s(e[1]))])})),0)],1)],1),n("div",{staticClass:"column"},[n("b-field",{staticClass:"generation-controls"},[n("p",{staticClass:"control"},[n("b-tooltip",{attrs:{label:"Run the simulation again",position:"is-left"}},[n("b-button",{staticClass:"btn-dark",attrs:{loading:t.isContinuing,"icon-right":"reload"},on:{click:function(e){return t.restart()}}})],1)],1),n("p",{staticClass:"control"},[n("b-tooltip",{attrs:{label:"Run the simulation with a new random seed",position:"is-left"}},[n("b-button",{staticClass:"btn-dark",attrs:{loading:t.isContinuing,"icon-right":"dice-5"},on:{click:function(e){return t.shuffleSimulation()}}})],1)],1),n("p",{staticClass:"control"},[n("b-tooltip",{attrs:{label:"See more generations",position:"is-left"}},[n("b-button",{staticClass:"btn-dark",attrs:{loading:t.isContinuing,"icon-right":"layers-plus"},on:{click:function(e){return t.keepGoing()}}})],1)],1)])],1)]),n("div",{staticClass:"field is-grouped is-grouped multiline"},[n("div",{staticClass:"tags"},t._l(t.hiddenPlots,(function(e){return n("div",{staticClass:"tag is-large clickable",style:{color:e.titleColor},on:{click:function(n){return t.showPlot(e)}}},[n("b-icon",{attrs:{icon:"plus-box"}}),n("span",[t._v(t._s(t._f("startCase")(e.label)))])],1)})),0)]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[t._m(0),n("OverviewPlot",{attrs:{data:t.plots,label:"Overview"}})],1)]),n("div",{staticClass:"columns"},[n("div",{staticClass:"column"},[t._m(1),n("BirthDeathPlot",{attrs:{data:t.birthsDeathsData,stacked:!0},on:{click:t.loadGeneration}})],1),n("div",{staticClass:"column"},[t._m(2),n("FoodPlot",{attrs:{data:t.foodData,maxFood:t.maxFood},on:{click:t.loadGeneration}})],1)]),n("div",{staticClass:"columns is-multiline"},t._l(t.plots,(function(e){return n("div",{key:e.label,staticClass:"column is-half-tablet is-one-third-fullhd"},[n("h2",{staticClass:"heading plot-title clickable",style:{color:e.titleColor},on:{click:function(n){return t.hidePlot(e)}}},[n("b-icon",{attrs:{icon:"minus-box"}}),t._v(" "),n("span",{staticClass:"name"},[t._v(t._s(t._f("startCase")(e.label)))])],1),n("TraitPlot",{attrs:{data:e.data,label:t._f("startCase")(e.label),color:e.color},on:{click:t.loadGeneration}})],1)})),0)])},Rn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"heading plot-title"},[n("span",{staticClass:"name"},[t._v("Overview")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"heading plot-title"},[n("span",{staticClass:"name"},[t._v("Births and Deaths")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"heading plot-title"},[n("span",{staticClass:"name"},[t._v("Food")])])}],Hn=n("9e86"),Wn=n.n(Hn),Xn=n("51f5"),Yn=n.n(Xn);function qn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Un(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qn(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zn(t,e,n){return Math.min(Math.max(t,e),n)}var Qn,Kn,Jn={name:"TraitPlot",extends:on["b"],props:{data:{type:Array},label:{type:String},color:{type:String,default:"#FCFDF4"},textColor:{type:String,default:"#FCFDF4"}},components:{},data:function(){return{}},computed:{options:function(){var t=this;return{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",animation:{duration:0},tooltips:{intersect:!1,mode:"index",position:"nearest",callbacks:{label:function(e,n){var r=e.datasetIndex;if(2===r){var i=t.data[e.xLabel-1].deviation.toFixed(2);return"average: ".concat(e.yLabel.toFixed(2)," ± ").concat(i)}if(0===r||4===r){var o=n.datasets[r].label;return"".concat(o,": ").concat(e.yLabel.toFixed(2))}},title:function(t){var e=t[0].xLabel;return"Generation: "+e}}},scales:{xAxes:[{display:!0,ticks:{min:1,fontColor:this.textColor}}],yAxes:[{type:"linear",beginAtZero:!0,display:!0,ticks:{fontColor:this.textColor},position:"left"}]},legend:{display:!1},elements:{line:{borderWidth:1,tension:0}}}},chartdata:function(){var t=Gt()(this.color).alpha(.1).css(),e=t,n=Gt()(this.color).desaturate(2).alpha(.3).css();if(!this.data)return{};var r={label:this.label,showLine:!0,pointRadius:1,borderColor:this.color,backgroundColor:t,fill:!1};return Number.isFinite(this.data[0])?{datasets:[Un({},r,{data:this.data.map((function(t,e){return{y:t,x:e+1}}))})]}:{datasets:[Un({},r,{pointRadius:0,data:this.data.map((function(t,e){return{y:t.max,x:e+1}})),borderColor:n,label:"max"}),Un({},r,{pointRadius:0,data:this.data.map((function(t,e){return{y:Zn(t.mean+t.deviation,t.min,t.max),x:e+1}})),borderColor:e,backgroundColor:t,fill:2,label:"stddev (+)"}),Un({},r,{data:this.data.map((function(t,e){return{y:t.mean,x:e+1}})),label:"average"}),Un({},r,{pointRadius:0,data:this.data.map((function(t,e){return{y:Zn(t.mean-t.deviation,t.min,t.max),x:e+1}})),borderColor:e,backgroundColor:t,fill:2,label:"stddev (-)"}),Un({},r,{pointRadius:0,data:this.data.map((function(t,e){return{y:t.min,x:e+1}})),borderColor:n,label:"min"})]}}},watch:{chartdata:function(){this.render()},options:function(){this.render()}},mounted:function(){var t=this;this.render();var e=function(){var e=t._data._chart.tooltip;if(e._active){var n=e._active[0]._index+1;t.$emit("click",n)}};this.$el.addEventListener("click",e),this.$on("hook:beforeDestroy",(function(){t.$el.removeEventListener("click",e)}))},methods:{render:function(){this._inactive||(this.options.scales.xAxes[0].max=this.chartdata.length,this.renderChart(this.chartdata,this.options))}}},tr=Jn,er=Object(b["a"])(tr,Qn,Kn,!1,null,"23e4472b",null),nr=er.exports;function rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ir(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rr(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var or,ar,sr={name:"OverviewPlot",extends:on["b"],props:{data:{type:Array},label:{type:String},textColor:{type:String,default:"#FCFDF4"}},components:{},data:function(){return{}},computed:{options:function(){return{responsive:!0,maintainAspectRatio:!1,hoverMode:"index",animation:{duration:0},tooltips:{intersect:!1,mode:"index",position:"nearest",callbacks:{label:function(t,e){var n=t.datasetIndex,r=e.datasets[n].label;return"".concat(r,": ").concat(t.yLabel.toFixed(2))},title:function(t){var e=t[0].xLabel;return"Generation: "+e}}},scales:{xAxes:[{display:!0,ticks:{min:1,fontColor:this.textColor}}],yAxes:[{id:"traits",type:"linear",beginAtZero:!0,display:!0,ticks:{fontColor:this.textColor},stacked:!0,position:"left",scaleLabel:{display:!0,labelString:"Traits",fontColor:this.textColor,fontSize:16}},{id:"population",type:"linear",beginAtZero:!0,display:!0,ticks:{fontColor:this.textColor},position:"right",scaleLabel:{display:!0,labelString:"Population",fontColor:this.textColor,fontSize:16}}]},legend:{display:!1},elements:{line:{borderWidth:1,tension:0}}}},chartdata:function(){if(!this.data)return{};var t={showLine:!0,pointRadius:1,fill:!1},e=this.data.map((function(e){return ir({},t,{},e,{borderColor:e.color,backgroundColor:e.color,data:e.data?e.data.map((function(t,e){return{y:G()(t,"mean",t),x:e+1}})):[]})}));return{datasets:e}}},watch:{chartdata:function(){this.render()},options:function(){this.render()}},mounted:function(){var t=this;this.render();var e=function(){var e=t._data._chart.tooltip;if(e._active){var n=e._active[0]._index+1;t.$emit("click",n)}};this.$el.addEventListener("click",e),this.$on("hook:beforeDestroy",(function(){t.$el.removeEventListener("click",e)}))},methods:{render:function(){this._inactive||(this.options.scales.xAxes[0].max=this.chartdata.length,this.renderChart(this.chartdata,this.options))}}},cr=sr,lr=Object(b["a"])(cr,or,ar,!1,null,"5bcdc6d6",null),ur=lr.exports;function dr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dr(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fr,hr,mr={name:"FoodPlot",extends:on["a"],props:{data:{type:Array},label:{type:String},textColor:{type:String,default:"#FCFDF4"},responsive:{type:Boolean,default:!0},stacked:{type:Boolean,default:!1},maxFood:Number},components:{},data:function(){return{}},computed:{options:function(){return{responsive:this.responsive,maintainAspectRatio:!1,hoverMode:"index",animation:{duration:0},tooltips:{intersect:!1,mode:"index",position:"nearest",callbacks:{label:function(t,e){var n=t.datasetIndex,r=e.datasets[n].label;return"".concat(r,": ").concat(t.yLabel.toFixed(0))},title:function(t){var e=t[0].index+1;return"Generation: "+e}}},scales:{xAxes:[{display:!0,ticks:{min:1,fontColor:this.textColor}}],yAxes:[{type:"linear",beginAtZero:!0,display:!0,ticks:{fontColor:this.textColor,max:this.maxFood},stacked:this.stacked,position:"left",scaleLabel:{display:!0,labelString:"# Blobs",fontColor:this.textColor,fontSize:16}}]},legend:{display:!1},elements:{line:{borderWidth:1,tension:0}}}},chartdata:function(){if(!this.data)return{};var t={showLine:!0,pointRadius:1,fill:!1},e=this.data.map((function(e){return pr({},t,{borderColor:e.color,backgroundColor:e.color},e,{data:e.data?e.data.map((function(t){return t[1]})):[]})}));return{labels:this.data.length?Je()(this.data[0].data.length,(function(){return""})):[],datasets:e}}},watch:{chartdata:function(){this.render()},options:function(){this.render()}},mounted:function(){var t=this;this.render();var e=function(){var e=t._data._chart.tooltip;if(e._active){var n=e._active[0]._index+1;t.$emit("click",n)}};this.$el.addEventListener("click",e),this.$on("hook:beforeDestroy",(function(){t.$el.removeEventListener("click",e)}))},methods:{render:function(){this._inactive||(this.options.scales.xAxes[0].max=this.chartdata.length,this.renderChart(this.chartdata,this.options))}}},br=mr,vr=Object(b["a"])(br,fr,hr,!1,null,"625fbb02",null),gr=vr.exports;function yr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yr(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Or=Wn()(ne,(function(t){return Gt()(t).desaturate(1).css()})),jr={name:"SimulationStatistics",props:{},data:function(){return{traitColors:ne,populationColor:ne.population,titleColors:Or,hiddenPlots:[]}},components:{TraitPlot:nr,FoodPlot:fn,OverviewPlot:ur,BirthDeathPlot:gr},created:function(){},deactivated:function(){},beforeDestroy:function(){},mounted:function(){},computed:wr({},Object(l["c"])("simulation",{generationIndex:"currentGenerationIndex",statistics:"statistics",traits:"traits",isLoading:"isLoading",isContinuing:"isContinuing",speciesFilterList:"speciesFilterList"}),{statsSpeciesFilter:{get:function(){return this.$store.state.simulation.statsSpeciesFilter},set:function(t){this.$store.dispatch("simulation/setStatsFilter",t)}},plots:function(){var t=this;return[{color:ne.population,titleColor:ne.population,data:this.populationData,label:"population",yAxisID:"population"}].concat(this.traits.map((function(e){return{color:ne[e],titleColor:Or[e],data:t.traitData[e],label:e}}))).filter((function(e){return Yn()(t.hiddenPlots,["label",e.label])<0}))},birthsDeathsData:function(){if(!this.statistics)return[];var t=this.statistics.generation_statistics;return[{color:ee.ivory,backgroundColor:Gt()(ee.ivory).alpha(.5).css(),fill:"origin",label:"Net Change",type:"line",data:t.map((function(t,e){return[e+1,t.births-t.deaths]}))},{color:ee.green,backgroundColor:Gt()(ee.green).alpha(.5).css(),fill:"origin",label:"Births",stack:"stack",data:t.map((function(t,e){return[e+1,t.births]}))},{color:ee.red,backgroundColor:Gt()(ee.red).alpha(.5).css(),fill:"origin",label:"Deaths",stack:"stack",data:t.map((function(t,e){return[e+1,-t.deaths]}))}]},foodData:function(){if(!this.statistics)return[];var t=this.statistics.generation_statistics;return[{color:ee.ivory,backgroundColor:Gt()(ee.ivory).alpha(.2).css(),fill:"+1",label:"Food Available",data:t.map((function(t,e){return[e+1,t.food_balls_available]}))},{color:ee.green,backgroundColor:Gt()(ee.green).alpha(.5).css(),fill:"origin",label:"Food Eaten",data:t.map((function(t,e){return[e+1,t.food_balls_eaten]}))},{color:ee.red,backgroundColor:Gt()(ee.red).alpha(.5).css(),fill:"origin",label:"Creatures Eaten",data:t.map((function(t,e){return[e+1,t.creatures_eaten]}))}]},maxFood:function(){return this.statistics?this.statistics.generation_statistics.reduce((function(t,e){return Math.max(t,e.food_balls_available)}),0):0},traitData:function(){var t=this;if(!this.statistics)return{};var e={};return this.traits.forEach((function(n){e[n]=t.statistics.generation_statistics.map((function(t){return t[n]}))})),e},populationData:function(){return this.statistics?this.statistics.generation_statistics.map((function(t){return t.population})):[]}}),watch:{},methods:wr({showPlot:function(t){var e=this.hiddenPlots.indexOf(t);this.hiddenPlots.splice(e,1)},hidePlot:function(t){this.hiddenPlots.push(t)},shuffleSimulation:function(){var t=1e3*Math.random()|0;this.$store.dispatch("simulation/setConfig",{seed:t}),this.restart()},loadGeneration:function(t){var e=this.$route,n=e?e.params:{},r=e?e.query:{};this.$router.push({name:"viewscreen",params:wr({},n,{generationIndex:t}),query:r})}},Object(l["b"])("simulation",{restart:"run",keepGoing:"continue"}))},Cr=jr,xr=(n("c3ec"),Object(b["a"])(Cr,Bn,Rn,!1,null,"0b23b0fe",null)),Pr=xr.exports,_r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"viewer"},[n("transition",{attrs:{name:"slide-down",appear:""},on:{"after-enter":t.fixLayout,"after-leave":t.fixLayout}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showConfig&&!t.showIntro,expression:"!showConfig && !showIntro"}],staticClass:"top-controls"},[n("FloatingPanel",{attrs:{size:"is-medium","close-on-click":!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("b-icon",{staticClass:"icon-btn",attrs:{icon:"layers-search",size:"is-medium"}})]},proxy:!0}])},[n("div",{staticClass:"item"},[n("b-tooltip",{attrs:{label:"Toggle sight range indicators",position:"is-left"}},[n("b-icon",{staticClass:"icon-btn",class:{active:t.showSightIndicator},attrs:{icon:"eye",size:"is-medium"},nativeOn:{click:function(e){e.stopPropagation(),t.showSightIndicator=!t.showSightIndicator}}})],1)],1),n("div",{staticClass:"item"},[n("b-tooltip",{attrs:{label:"Color blobs based on speed (brown: slow, red: fast)",position:"is-left"}},[n("b-icon",{staticClass:"icon-btn",class:{active:t.showSpeedIndicator},attrs:{icon:"run-fast",size:"is-medium"},nativeOn:{click:function(e){e.stopPropagation(),t.showSpeedIndicator=!t.showSpeedIndicator}}})],1)],1),n("div",{staticClass:"item"},[n("b-tooltip",{attrs:{label:"Toggle energy indicators",position:"is-left"}},[n("b-icon",{staticClass:"icon-btn",class:{active:t.showEnergyIndicator},attrs:{icon:"battery-charging",size:"is-medium"},nativeOn:{click:function(e){e.stopPropagation(),t.showEnergyIndicator=!t.showEnergyIndicator}}})],1)],1),n("div",{staticClass:"item"},[n("b-tooltip",{attrs:{label:"Toggle food indicators",position:"is-left"}},[n("b-icon",{staticClass:"icon-btn",class:{active:t.showFoodIndicator},attrs:{icon:"silverware-fork-knife",size:"is-medium"},nativeOn:{click:function(e){e.stopPropagation(),t.showFoodIndicator=!t.showFoodIndicator}}})],1)],1)]),n("b-icon",{staticClass:"icon-btn",class:{active:t.followCreature},attrs:{icon:"cctv",size:"is-medium"},nativeOn:{click:function(e){e.stopPropagation(),t.followCreature=!t.followCreature}}}),n("div",{staticClass:"under"},[t.followCreature&&t.followCreatureId?n("CreatureFlowerChart",{attrs:{id:t.followCreatureId}}):t._e()],1)],1)]),n("div",{staticClass:"screen"},[n("b-loading",{staticClass:"loading-cover",attrs:{"is-full-page":!1,active:!t.showIntro&&t.isLoading}}),n("GenerationViewer",{ref:"generationViewer",attrs:{"generation-index":t.genIndex,"step-time":t.stepTime,"sight-indicators":t.showSightIndicator,"speed-indicators":t.showSpeedIndicator,"energy-indicators":t.showEnergyIndicator,"food-indicators":t.showFoodIndicator,followCreatureId:t.followCreature?t.followCreatureId:void 0},on:{"tap-creature":function(e){t.followCreatureId=e.creature.id,t.followCreature=!0}}})],1),n("transition",{attrs:{name:"fade",appear:""}},[t.showIntro?t._e():n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showConfig,expression:"!showConfig"}],staticClass:"controls"},[n("div",{staticClass:"inner"},[n("b-field",{staticClass:"extras",class:{active:t.playthrough},attrs:{grouped:"",position:"is-centered"}},[n("b-field",[n("b-tooltip",{attrs:{label:"Playthrough "+(t.playthrough?"(is on)":"(is off)"),position:"is-top"}},[n("b-icon",{staticClass:"icon-btn",attrs:{title:"play through",size:"is-medium",icon:"transfer-right"},nativeOn:{click:function(e){t.playthrough=!t.playthrough}}})],1)],1)],1),n("b-field",{attrs:{grouped:"",position:"is-centered"}},[n("b-field",[n("b-icon",{staticClass:"icon-btn",attrs:{icon:"chevron-left",size:"is-large"},nativeOn:{click:function(e){return t.prevGeneration()}}})],1),n("b-field",[n("b-icon",{staticClass:"icon-btn",attrs:{icon:t.paused?"play":"pause",size:"is-large"},nativeOn:{click:function(e){return t.togglePlay()}}})],1),n("b-field",[n("b-icon",{staticClass:"icon-btn",attrs:{icon:"chevron-right",size:"is-large"},nativeOn:{click:function(e){return t.nextGeneration()}}})],1)],1),n("div",{staticClass:"right"},[n("FloatingPanel",{attrs:{size:"is-medium",direction:"up","close-on-click":!1},scopedSlots:t._u([{key:"activator",fn:function(){return[n("b-icon",{staticClass:"icon-btn",attrs:{icon:"clock-fast",size:"is-medium"}})]},proxy:!0}],null,!1,621597160)},[n("div",{staticClass:"item"},[n("vue-slider",{attrs:{min:1,max:13,interval:1,height:200,direction:"btt",contained:!0},model:{value:t.playbackSpeed,callback:function(e){t.playbackSpeed=e},expression:"playbackSpeed"}})],1)])],1)],1),n("AudioScrubber",{attrs:{progress:t.progress},on:{scrub:t.onScrub,scrubstart:t.onScrubStart,scrubend:t.onScrubEnd}})],1)])],1)},kr=[],Sr=(n("a69f"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"generation-viewer"},[n("v3-renderer",{ref:"renderer",attrs:{width:t.viewWidth,height:t.viewHeight,shadows:!0,outlineColor:t.highlightColor}},[n("Gestures",{attrs:{names:t.interactiveObjects},on:{tap:t.tapCreature,hover:t.onHover}}),n("v3-scene",[n("v3-camera",{ref:"camera",attrs:{position:t.persCameraPos,"prevent-update":"",far:4500,near:1,aspect:t.viewWidth/t.viewHeight}},[n("v3-dom",{ref:"tour",attrs:{position:t.tourPosition}},[n("Tour")],1)],1),n("v3-light",{attrs:{type:"ambient",intensity:.9}}),n("v3-light",{attrs:{type:"directional",intensity:.25,position:[100,200,-10],"cast-shadow":!0,"shadow-camera":t.shadowCamera,"shadow-bias":1e-4,"shadow-radius":0,"shadow-map-size-power":1}}),n("v3-fog",{attrs:{near:1e3,far:3e3,color:13228006}}),n("fadeTransition",[t.showWorld?n("v3-plane",{attrs:{width:t.gridSize,height:t.gridSize,position:[0,-.05,0],color:16777215,rotation:[-Math.PI/2,0,0],"receive-shadow":!0}}):t._e()],1),n("fadeTransition",[t.showWorld?n("v3-box",{attrs:{width:t.gridSize+40,height:t.gridSize+40,depth:10,position:[0,-6,0],color:11184810,rotation:[-Math.PI/2,0,0],"receive-shadow":!0}}):t._e()],1),t.showWorld?n("v3-group",{attrs:{position:[.5*-t.gridSize,0,.5*-t.gridSize]}},t._l(t.generation.food,(function(t,e){return n("Food",{key:e,attrs:{food:t,"cast-shadow":!0,"receive-shadow":!0}})})),1):t._e(),t.showWorld?n("v3-group",{attrs:{position:[.5*-t.gridSize,0,.5*-t.gridSize]}},t._l(t.generation.creatures,(function(e,r){return n("Creature",t._b({key:r,ref:"v3Creatures",refInFor:!0,attrs:{creature:e,size:3,color:t.speedIndicators?t.speedColorScale(e.speed[0]).num():t.getCreatureColor(e.species)}},"Creature",t.creatureIndicators,!1),[e.id===t.followCreatureId?n("v3-group",[n("v3-dom",{attrs:{position:[0,13*(e.size[0]/10+.5),0]}},[n("CreatureStatus",{attrs:{creature:e}})],1),n("v3-group",{ref:"cameraGoal",refInFor:!0,attrs:{position:[-100,50,0]}}),n("v3-group",{ref:"cameraFocusGoal",refInFor:!0,attrs:{position:[0,30,0]}})],1):t._e()],1)})),1):t._e()],1)],1)],1)}),Dr=[],Er=n("5a89"),$r=n("aea1"),Ir=n("32d9"),Tr=(n("e9d2"),n("1b53")),Mr=n("93e9"),Fr=n("360d"),zr=n("4e15"),Ar=n("6c18");Tr["a"].FullScreenQuad=function(){var t=new Er["OrthographicCamera"](-1,1,1,-1,0,1),e=function(t){var e=new Er["PlaneBufferGeometry"](2,2);this._mesh=new Er["Mesh"](e,t)};return Object.defineProperty(e.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(e.prototype,{render:function(e){e.render(this._mesh,t)}}),e}();var Nr={name:"v3-renderer",props:{width:Number,height:Number,outlineColor:{type:Number,default:16777215},outlineColorBehind:{type:Number,default:6710886},clearColor:{type:Number,default:0},clearAlpha:{type:Number,default:0},shadows:Boolean},components:{},data:function(){return{}},provide:function(){var t=this;return{threeVue:t}},created:function(){var t=this;this.afterReady((function(){t.isReady=!0})),this.renderer=new Er["WebGLRenderer"]({alpha:!0,antialias:!1}),this.renderer.shadowMap.enabled=this.shadows,this.renderer.shadowMap.type=Er["PCFSoftShadowMap"],this.renderer.setPixelRatio(window.devicePixelRatio),this.cssRenderer=new $r["b"]({});var e=this.composer=new Ir["a"](this.renderer),n=this.renderPass=new Mr["a"](null,null,null,new Er["Color"](this.clearColor),this.clearAlpha);e.addPass(n);var r=this.effectFXAA=new Fr["a"](Ar["a"]),i=this.renderer.getPixelRatio();r.material.uniforms["resolution"].value.x=1/(this.width*i),r.material.uniforms["resolution"].value.y=1/(this.height*i),e.addPass(r),this.$watch((function(){return t.width+~t.height}),(function(){t.renderer.setSize(t.width,t.height),t.cssRenderer.setSize(t.width,t.height),t.composer.setSize(t.width,t.height),r.material.uniforms["resolution"].value.x=1/(t.width*i),r.material.uniforms["resolution"].value.y=1/(t.height*i),t.$emit("resize")}),{immediate:!0})},beforeDestroy:function(){this.renderer.dispose(),this.effectFXAA.material.dispose(),this.effectFXAA.fsQuad._mesh.geometry.dispose(),this.composer.renderTarget1.dispose(),this.composer.renderTarget2.dispose(),this.composer.copyPass.material.dispose(),this.composer.copyPass.fsQuad._mesh.geometry.dispose(),this.outlinePass&&this.outlinePass.dispose()},mounted:function(){this.cssRenderer.domElement.style.position="absolute",this.cssRenderer.domElement.style.top="0",this.cssRenderer.domElement.style.left="0",this.cssRenderer.domElement.style.zIndex="1",this.cssRenderer.domElement.style.userSelect="none",this.cssRenderer.domElement.style.lineHeight="normal",this.cssRenderer.domElement.className="no-events",this.$el.appendChild(this.renderer.domElement),this.$el.appendChild(this.cssRenderer.domElement)},computed:{},watch:{outlineColor:function(){this.outlinePass.visibleEdgeColor.set(this.outlineColor)},outlineColorBehind:function(){this.outlinePass.hiddenEdgeColor.set(this.outlineColorBehind)},shadows:function(){this.renderer.shadowMap.enabled=this.shadows},clearColor:function(){this.renderPass.clearColor=new Er["Color"](this.clearColor)},clearAlpha:function(){this.renderPass.clearAlpha=this.clearAlpha}},methods:{draw:function(){if(!this.scene)throw this.draw=function(){},new Error("No scene added to the renderer");if(!this.camera)throw this.draw=function(){},new Error("No camera added to the renderer");this.$emit("beforeDraw"),this.initOutlinePass(),this.renderPass.camera=this.camera,this.renderPass.scene=this.scene,this.composer.render(),this.cssRenderer.render(this.scene,this.camera)},getObjectByName:function(t){return this.scene.getObjectByName(t)},afterReady:function(t){if(this.isReady)return t(),this;this.$once("hook:mounted",t)},checkClear:function(){var t=this.composer.passes.indexOf(this.renderPass);this.renderPass.clear=0===t},insertRenderPass:function(t,e){this.composer.passes.indexOf(t)>-1||(void 0===e&&(e=this.composer.passes.length),this.composer.insertPass(t,e),this.checkClear())},removeRenderPass:function(t){var e=this.composer.passes.indexOf(t);e<0||this.composer.passes.splice(e,1)},initOutlinePass:function(){if(!this.outlinePass||this.outlinePass.renderCamera!==this.camera||this.outlinePass.renderScene!==this.scene){if(this.outlinePass){var t=this.composer.passes.indexOf(this.outlinePass);this.composer.passes.splice(t,1),this.outlinePass.dispose()}var e=new Er["Vector2"](this.width,this.height),n=this.outlinePass=new zr["a"](e,this.scene,this.camera);n.edgeStrength=3,n.edgeThickness=1,n.overlayMaterial.blending=Er["NormalBlending"],n.visibleEdgeColor.set(this.outlineColor),n.hiddenEdgeColor.set(this.outlineColorBehind),this.composer.addPass(n)}},addOutline:function(t){var e=this.outlinePass.selectedObjects.indexOf(t);e>-1||this.outlinePass.selectedObjects.push(t)},removeOutline:function(t){void 0===t&&(this.outlinePass.selectedObjects=[]);var e=this.outlinePass.selectedObjects.indexOf(t);e<0||this.outlinePass.selectedObjects.splice(e,1)}},render:function(t){return t("div",{style:{position:"relative",overflow:"hidden",lineHeight:0}},this.$slots.default)}},Vr=n("7618"),Gr=n("c228"),Lr=n.n(Gr),Br={props:{name:String,visible:{type:Boolean,default:!0},castShadow:{type:Boolean,default:!1},receiveShadow:{type:Boolean,default:!1},depthTest:{type:Boolean,default:!0},depthWrite:{type:Boolean,default:!0}},inject:["threeVue"],created:function(){this.disposables=[]},mounted:function(){var t=this;if(!this.v3object)throw new Error("Please set component v3object property");var e=this.$parent.v3object;e&&(e.add(this.v3object),this.$on("hook:beforeDestroy",(function(){e.remove(t.v3object)})),this.threeVue.$emit("scene:changed",{type:"add",component:this,object:this.v3object}))},beforeDestroy:function(){this.threeVue.$emit("scene:changed",{type:"remove",component:this,object:this.v3object}),!1!==this.autoClean&&this.registerDisposables([this.v3object,this.v3object.geometry,this.v3object.material]),this.disposables.forEach((function(t){t.dispose()}))},render:function(t){this.v3object||this.createObject(),this.updateObjects();var e=this.v3object,n=e.material;return e.name=this.name,e.visible=this.visible,e.castShadow=this.castShadow,e.receiveShadow=this.receiveShadow,n&&(n.depthTest=this.depthTest,n.depthWrite=this.depthWrite),t("div",this.visible?this.$slots.default:[])},methods:{updateObjects:function(){},registerDisposables:function(t,e){if(!t||this.disposables.indexOf(t)>-1)return this;if(e&&(t.children&&this.registerDisposables(t.children,e),t.material&&this.registerDisposables(t.material,e),t.geometry&&this.registerDisposables(t.material,e)),t.dispose)this.disposables.push(t),t=Lr()(t),Array.prototype.push.apply(this.disposables,t);else if(Array.isArray(t)){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;this.registerDisposables(s,e)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}return this},beforeDraw:function(t){var e=this;this.threeVue.$on("beforeDraw",t),this.$on("hook:beforeDestroy",(function(){e.threeVue.$off("beforeDraw",t)}))},assignProps:function(t,e){if(t)for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(i in t){var o=this[i],a=t[i];a instanceof Er["Color"]||a instanceof Er["Vector3"]||a instanceof Er["Euler"]?Array.isArray(o)?(a.fromArray(o),this.$emit("update:".concat(i),a)):"object"===Object(Vr["a"])(o)?(a.copy(o),this.$emit("update:".concat(i),a)):(a.set(o),this.$emit("update:".concat(i),a)):(t[i]=o,this.$emit("update:".concat(i),o))}}}}},Rr={name:"fade-transtion",mixins:[Br],props:{duration:{type:Number,default:1e3}},created:function(){this.v3object=new Er["Object3D"]},render:function(t){var e={props:{css:!1},on:{enter:this.enter,beforeEnter:this.beforeEnter,beforeLeave:this.beforeLeave,leave:this.leave,afterLeave:this.afterLeave}};return t("transition",e,this.$slots.default)},methods:{beforeEnter:function(){this.$children.forEach((function(t){var e=t.v3object.material;e.transparent=!0,e.oldOpacity=e.opacity,e.opacity=0}))},enter:function(t,e){this.fade(!0,e)},beforeLeave:function(){this.$children.forEach((function(t){var e=t.v3object.material;e.oldOpacity=e.opacity}))},leave:function(t,e){this.fade(!1,e)},afterLeave:function(){this.$children.forEach((function(t){var e=t.v3object.material;e.opacity=e.oldOpacity,t.$parent.v3object.remove(t.v3object)}))},fade:function(t,e){var n=this.threeVue,r=this.duration,i=U.a.Util.now(),o=i+r,a=U.a.Interpolators.Linear,s=this.$children.concat();s.forEach((function(t){t.$parent.v3object.add(t.v3object)}));var c=function r(){var c=U.a.Util.now(),l=U.a.Animation.getTimeFraction(i,o,c),u=U.a.Easing.Quadratic.InOut(l);s.forEach((function(e){var n=e.v3object.material,r=t?0:n.oldOpacity,i=t?n.oldOpacity:0,o=U.a.Animation.interpolateProperty(a,r,i,u);n.opacity=o})),c>o&&(n.$off("beforeDraw",r),e())};n.$on("beforeDraw",c)}}},Hr={name:"Gestures",inject:["threeVue"],props:{names:Array},components:{},data:function(){return{}},created:function(){this.raycaster=new Er["Raycaster"],this.pos=new Er["Vector2"]},mounted:function(){var t=this,e=function(){if(t.names){var e=t.names;t.monitored=t.threeVue.scene.children.reduce(n,[])}else t.monitored=[];function n(t,r){return r?(e.indexOf(r.name)>-1&&t.push(r),r.children.reduce(n,t)):t}};this.threeVue.$on("scene:changed",e),this.$on("beforeDestroy",(function(){t.threeVue.$off("scene:changed",e)})),e(),this.listen("mousemove",(function(e){return t.onMouseMove(e)})),this.listen("mousedown",(function(e){return t.onMouseDown(e)})),this.listen("mouseup",(function(e){return t.onMouseUp(e)})),this.listen("touchmove",(function(e){return t.onTouchMove(e)})),this.listen("touchstart",(function(e){return t.onTouchStart(e)}),!1),this.listen("touchend",(function(e){return t.onTouchEnd(e)}))},render:function(){return null},methods:{listen:function(t,e,n){var r=this.threeVue.renderer.domElement;"mouseup"!==t&&"touchend"!==t||(r=document),r.addEventListener(t,e,void 0!==n?n:{passive:!0}),this.$on("hook:beforeDestroy",(function(){r.removeEventListener(t,e)}))},getMousePos:function(t){var e=this.pos,n=this.threeVue.renderer.domElement.getBoundingClientRect(),r=t.clientX-n.left,i=t.clientY-n.top;return e.x=r/n.width*2-1,e.y=-i/n.height*2+1,e},getTouchPos:function(t){var e=this.pos,n=this.threeVue.renderer.domElement.getBoundingClientRect(),r=t.touches[0];if(!r)return e;var i=r.pageX-n.left,o=r.pageY-n.top;return e.x=i/n.width*2-1,e.y=-o/n.height*2+1,e},raycast:function(t){var e=this.threeVue.camera,n=this.raycaster;return e?(n.setFromCamera(t,e),n.intersectObjects(this.monitored)):[]},onMouseDown:function(t){var e=this.getMousePos(t);this.dragStart(e)},onMouseUp:function(t){var e=this.getMousePos(t);this.dragEnd(e)},onMouseMove:function(t){var e=this.getMousePos(t);this.drag(e)},onTouchStart:function(t){t.preventDefault();var e=this.getTouchPos(t);this.dragStart(e)},onTouchEnd:function(t){var e=this.getTouchPos(t);this.dragEnd(e)},onTouchMove:function(t){t.stopPropagation();var e=this.getTouchPos(t);this.drag(e)},dragStart:function(t){var e=this.raycast(t);if(e.length){var n=this.raycaster.ray.clone();this.dragging={intersects:e,ray:n},this.dragged=!1,this.$emit("dragstart",{intersects:e,ray:n})}},dragEnd:function(t){var e=this.raycast(t),n=this.dragging;if(this.dragging=!1,n){var r=this.raycaster.ray.clone();this.dragged?this.$emit("dragend",{intersects:e,ray:r}):G()(e[0],"object")===G()(n.intersects[0],"object")&&this.$emit("tap",{intersects:e,ray:r})}},drag:function(t){var e=this.raycast(t),n=this.raycaster.ray.clone();this.dragging?(this.dragged=!0,this.$emit("drag",{intersects:e,ray:n})):this.$emit("hover",{intersects:e,ray:n})}}};function Wr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wr(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yr={background:Object},qr={name:"v3-scene",mixins:[Br],props:Xr({},Yr),components:{},data:function(){return{}},mounted:function(){this.$el.parentNode.removeChild(this.$el)},created:function(){this.scene=this.v3object=new Er["Scene"],this.threeVue.scene=this.scene},methods:{updateObjects:function(){this.assignProps(this.scene,Yr)}}};function Ur(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ur(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ur(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Qr={orthographiccamera:function(t){var e=t.left,n=t.right,r=t.top,i=t.bottom,o=t.near,a=t.far;return new Er["OrthographicCamera"](e,n,r,i,o,a)},perspectivecamera:function(t){var e=t.fov,n=t.aspect,r=t.near,i=t.far;return new Er["PerspectiveCamera"](e,n,r,i)}},Kr={fov:{type:Number,default:45},aspect:{type:Number,default:1},near:{type:Number,default:1},far:{type:Number,default:1e3},left:Number,right:Number,top:Number,bottom:Number},Jr={zoom:{type:Number,default:1},position:{default:function(){return[0,0,0]}},rotation:{default:function(){return[0,0,0]}}},ti={name:"v3-camera",mixins:[Br],props:Zr({type:{type:String,default:"perspective"},preventUpdate:Boolean,lookAt:Array},Kr,{},Jr),components:{},data:function(){return{}},created:function(){var t=this,e=this.camera=this.cameraConstructor(this);e.position.z=1,this.v3object=e,this.assignProps(this.v3object,Jr),this.$watch((function(){return""+t.fov+t.aspect+t.left+t.right+t.top+t.bottom+t.zoom}),(function(){t.$nextTick((function(){return t.v3object.updateProjectionMatrix()}))}))},mounted:function(){this.v3object.updateProjectionMatrix(),this.threeVue.camera=this.v3object},computed:{lookAtV:function(){return(new Er["Vector3"]).fromArray(this.lookAt)},cameraConstructor:function(){var t=this.type.toLowerCase();return Qr[t+"camera"]||Qr[t]}},methods:{updateObjects:function(){this.assignProps(this.v3object,Kr),this.preventUpdate||this.assignProps(this.v3object,Jr),this.lookAt&&this.v3object.lookAt(this.lookAtV)}}},ei=n("4472"),ni=n.n(ei);function ri(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ii(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ri(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ri(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var oi={ambientlight:function(t){var e=t.color,n=t.intensity;return new Er["AmbientLight"](e,n)},directionallight:function(t){var e=t.color,n=t.intensity;return new Er["DirectionalLight"](e,n)},hemispherelight:function(t){var e=t.skyColor,n=t.groundColor,r=t.intensity;return new Er["HemisphereLight"](e,n,r)},pointlight:function(t){var e=t.color,n=t.intensity,r=t.distance,i=t.decay;return new Er["PointLight"](e,n,r,i)},rectarealight:function(t){var e=t.color,n=t.intensity,r=t.width,i=t.height;return new Er["RectAreaLight"](e,n,r,i)},spotlight:function(t){var e=t.color,n=t.intensity,r=t.distance,i=t.angle,o=t.penumbra,a=t.decay;return new Er["SpotLight"](e,n,r,i,o,a)}},ai={color:{type:Number,default:16777215},intensity:{type:Number,default:1},distance:{type:Number,default:0},angle:{type:Number,default:Math.PI/2},penumbra:{type:Number,default:0},decay:{type:Number,default:void 0},skyColor:{type:Number,default:16777215},groundColor:{type:Number,default:16777215},position:{default:function(){return[0,0,0]}}},si={shadowBias:{type:Number,default:0},shadowRadius:{type:Number,default:1}},ci=ni()(si,(function(t,e){return e[6].toLowerCase()+e.substr(7)})),li={name:"v3-light",mixins:[Br],props:ii({type:String,target:String},ai,{},si,{shadowMapSizePower:{type:Number,default:0},shadowCamera:{type:Object,default:function(){return{}}},debug:Boolean}),components:{},data:function(){return{}},created:function(){var t=this,e=this.lightConstructor(this);if(this.v3object=e,this.debug&&e.shadow){var n=this.shadowHelper=new Er["CameraHelper"](e.shadow.camera);this.$parent.v3object.add(n),this.beforeDraw((function(){n.update()})),this.$on("hook:beforeDestroy",(function(){t.$parent.v3object.remove(n)}))}this.registerDisposables({dispose:function(){t.v3object.shadow&&(t.v3object.shadow.map&&t.v3object.shadow.map.dispose(),t.v3object.shadow.mapPass&&t.v3object.shadow.mapPass.dispose())}})},watch:{target:function(t){var e=this;t&&this.threeVue.afterReady((function(){var n=e.threeVue.getObjectByName(t);e.v3object.target=n}))}},computed:{lightConstructor:function(){var t=this.type.toLowerCase();return oi[t+"light"]||oi[t]}},methods:{updateObjects:function(){this.assignProps(this.v3object,ai),this.castShadow&&(this.assignProps(this.v3object.shadow,ci),this.v3object.shadow.mapSize=new Er["Vector2"](512,512),this.v3object.shadow.mapSize.multiplyScalar(Math.pow(2,this.shadowMapSizePower)),this.v3object.shadow.map&&(this.v3object.shadow.map.dispose(),this.v3object.shadow.map=null),Object.assign(this.v3object.shadow.camera,this.shadowCamera),this.shadowHelper&&this.v3object.shadow&&(this.shadowHelper.camera=this.v3object.shadow.camera))}}};function ui(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function di(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ui(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ui(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var pi={position:{default:function(){return[0,0,0]}},rotation:{default:function(){return[0,0,0]}}},fi={name:"v3-group",mixins:[Br],props:di({},pi),components:{},data:function(){return{}},created:function(){this.v3object=new Er["Group"]},methods:{updateObjects:function(){this.assignProps(this.v3object,pi)}}};function hi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function mi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hi(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bi=document.createElement("div"),vi=(new Er["Vector2"],{position:{default:function(){return[0,0,0]}},rotation:{default:function(){return[0,0,0]}},anchorDir:{default:function(){return[0,0,0]}}}),gi={name:"v3-dom",mixins:[Br],props:mi({},vi),components:{},data:function(){return{}},created:function(){this.boundingBox=new Er["Box2"],this.v3object=new $r["a"](bi)},mounted:function(){this.$el.style.position="absolute",this.v3object.element=this.$el},methods:{updateObjects:function(){this.assignProps(this.v3object,vi)}}};function yi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function wi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yi(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Oi={position:{default:function(){return[0,0,0]}},rotation:{default:function(){return[0,0,0]}}},ji={name:"v3-grid",mixins:[Br],props:wi({},Oi,{size:{type:Number,default:10},divisions:{type:Number,default:64},color1:{type:Number,default:4473924},color2:{type:Number,default:8947848}}),components:{},data:function(){return{}},methods:{createObject:function(){this.v3object=new Er["GridHelper"](this.size,this.divisions,this.color1,this.color2)},updateObjects:function(){var t=this.v3object;t.material.dispose(),t.geometry.dispose(),this.createObject(),t.material=this.v3object.material,t.geometry=this.v3object.geometry,this.v3object=t,this.assignProps(this.v3object,Oi)}}},Ci=n("2593"),xi=n.n(Ci);function Pi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pi(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ki={position:{default:function(){return[0,0,0]}},rotation:{default:function(){return[0,0,0]}}},Si={width:{type:Number,default:10},height:{type:Number,default:10},segments:{type:Number,default:1}},Di={color:{type:Number,default:16777215},transparent:{type:Boolean,default:!1},opacity:{type:Number,default:1}},Ei={name:"v3-plane",mixins:[Br],props:_i({},ki,{},Si,{},Di),components:{},data:function(){return{}},watch:{geometry:function(t,e){e.dispose()}},computed:{geometry:function(){return new Er["PlaneGeometry"](this.width,this.height,this.segments)}},methods:{createObject:function(){var t=xi()(this,Object.keys(Di)),e=new Er["MeshLambertMaterial"](_i({side:Er["DoubleSide"]},t)),n=new Er["Mesh"](this.geometry,e);this.v3object=n},updateObjects:function(){this.assignProps(this.v3object,ki),this.assignProps(this.v3object.material,Di),this.v3object.geometry=this.geometry}}};function $i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ii(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$i(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ti={position:{default:function(){return[0,0,0]}},rotation:{default:function(){return[0,0,0]}}},Mi={width:{type:Number,default:10},height:{type:Number,default:10},depth:{type:Number,default:10}},Fi={color:{type:Number,default:16777215},transparent:{type:Boolean,default:!1},opacity:{type:Number,default:1}},zi={name:"v3-box",mixins:[Br],props:Ii({},Ti,{},Mi,{},Fi),components:{},data:function(){return{}},watch:{geometry:function(t,e){e.dispose()}},computed:{geometry:function(){return new Er["BoxGeometry"](this.width,this.height,this.depth)}},methods:{createObject:function(){var t=xi()(this,Object.keys(Fi)),e=new Er["MeshLambertMaterial"](Ii({},t)),n=new Er["Mesh"](this.geometry,e);this.v3object=n},updateObjects:function(){this.assignProps(this.v3object,Ti),this.assignProps(this.v3object.material,Fi),this.v3object.geometry=this.geometry}}};function Ai(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ni(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ai(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ai(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vi={color:{type:Number,default:0},near:{type:Number,default:1},far:{type:Number,default:1e3}},Gi={name:"v3-fog",inject:["threeVue"],props:Ni({},Vi),beforeDestroy:function(){this.threeVue.scene.fog=null},render:function(t){return this.threeVue.scene.fog=new Er["Fog"](this.color,this.near,this.far),t("div")}},Li=2,Bi=Gt()(ee.green).darken(1).saturate(.2).num(),Ri=new Er["SphereGeometry"](Li,64,64),Hi=new Er["MeshLambertMaterial"]({transparent:!0,opacity:0,color:Bi}),Wi={name:"food",mixins:[Br],inject:["getStep"],props:{food:Object},data:function(){return{}},watch:{food:function(){this.v3object.material.opacity=0}},created:function(){var t=this;this.beforeDraw((function(){var e=t.getStep(),n=e>=t.food.status.Eaten;t.v3object.visible=!n;var r=t.v3object.material;r.opacity=Er["Math"].lerp(r.opacity,1,.1)}))},methods:{createObject:function(){this.v3object=new Er["Mesh"](Ri,Hi),this.autoClean=!1},updateObjects:function(){var t=this.food.position;this.v3object.position.set(t[0],Li+.2,t[1])}}},Xi=n("d1eb");function Yi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function qi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yi(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ui=Le.default;function Zi(t){var e=new Er["SphereGeometry"](t,16,16,Math.PI/2,Math.PI),n=new Er["MeshBasicMaterial"]({color:0});return new Er["Mesh"](e,n)}function Qi(t){var e=new Er["MeshBasicMaterial"]({color:8947848}),n=t/8,r=new Er["Mesh"](new Er["PlaneGeometry"](t,n),e);r.rotation.set(0,Math.PI/2,0);var i=new Er["Mesh"](new Er["PlaneGeometry"](n,t),e);i.rotation.set(0,Math.PI/2,0);var o=new Er["Group"];return o.add(r,i),o}function Ki(){var t=40,e=160,n=300,r=new Xi["a"](e,new Er["MeshBasicMaterial"],!0,!0);r.scale.set(t,t,t),r.isolation=n;var i=1.2/((Math.sqrt(3)-1)/4+1);r.reset(),r.addBall(.5,.5,.5,i,100),r.addBall(.52,.54,.5,i/8,10),r.addBall(.515,.58,.5,i/4,10);var o=r.generateBufferGeometry();r.material.dispose();var a=new Er["MeshLambertMaterial"]({color:Ui}),s=new Er["Mesh"](o,a);s.name="blob",s.scale.set(t,t,t),s.position.y=4;var c=.082,l=Zi(t/85);l.name="right-eye",l.position.set(t*c,t/4.2,t/30),l.rotation.set(-.6,-.6,0);var u=l.clone();u.name="left-eye",u.position.set(t*c,t/4.2,-t/30),u.rotation.set(.6,.6,0);var d=Qi(t/35);d.name="right-dead-eye",d.position.set(t*c+.25,t/4.2,t/28),d.rotation.set(-1,-.4,-.35);var p=d.clone();return p.name="left-dead-eye",p.position.set(t*c+.25,t/4.2,-t/28),p.rotation.set(1,.4,-.35),[s,u,l,d,p]}var Ji=Ki(),to=function(){return Ji.reduce((function(t,e){return t.add(e.clone(!0))}),new Er["Group"])};function eo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"white",n=new Er["CircleGeometry"](t,64),r=new Er["MeshBasicMaterial"]({color:e}),i=new Er["Mesh"](n,r);return i}var no=function(){var t=eo(1,Gt.a.mix(ne.sense_range,"white",.8).num());return t.rotation.x=-Math.PI/2,t.material.depthWrite=!1,t.material.transparent=!0,t.material.blending=Er["MultiplyBlending"],t}(),ro=function(){var t=eo(6);return t.rotation.x=-Math.PI/2,t.material.depthWrite=!1,t.material.transparent=!0,t}(),io=function(){var t=Gt()(ee.green).darken(.4).saturate(.2).num(),e=eo(.8,t);return e.rotation.x=-Math.PI/2,e.material.transparent=!0,e}();function oo(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:45;e*=Math.PI/180;var n=Math.sin(e),r=Math.cos(e),i=new Er["Shape"];return i.lineTo(-1*r,-1*n),i.lineTo(-1*r+t*n,-1*n-t*r),i.lineTo(0,-t/r),i.lineTo(1*r-t*n,-1*n-t*r),i.lineTo(1*r,-1*n),i.lineTo(0,0),i}var ao=function(){var t=new Er["ShapeGeometry"](oo(.35,30)),e=new Er["MeshBasicMaterial"]({color:Gt()(ne.speed).num()});e.depthFunc=Er["AlwaysDepth"];var n=new Er["Group"];return Je()(4,(function(r){var i=1,o=2,a=new Er["Mesh"](t,e),s=r+1,c=Math.sqrt(s)*s*i+1;a.rotation.set(-Math.PI/2,0,-Math.PI/2),a.position.set(c*o-4,0,0),a.scale.set(c,c,c),n.add(a)})),n}(),so=function(){return ao.children.reduce((function(t,e){return t.add(e.clone(!1))}),new Er["Group"])},co=Gt.a.scale([ee.yellow,"#ccc"]).mode("lab");function lo(t,e){var n=0,r=t.energy_consumed/t.energy,i=Er["Math"].lerp(n,r,e);return co(i)}function uo(t){var e=t.speed[0],n=50,r=e/n;return 0|Er["Math"].lerp(1,4,r)}var po={color:{type:Number,default:Ui}},fo=new Er["Vector3"],ho=new Er["Vector3"](1,0,0),mo=new Er["Vector3"](0,1,0),bo={name:"creature",mixins:[Br],inject:["getStep"],props:qi({creature:Object,showSightIndicator:Boolean,showSpeedIndicator:Boolean,showEnergyIndicator:Boolean,showFoodIndicator:Boolean},po),components:{},data:function(){return{}},computed:{steps:function(){return this.creature.movement_history.length},spline:function(){return new Er["SplineCurve"](this.creature.movement_history.map((function(t){return new Er["Vector2"](t[0],t[1])})))},willDie:function(){return"DEAD"===this.creature.state}},created:function(){var t=this;this.beforeDraw((function(){var e=t.v3object.position,n=t.getStep(),r=Math.min(n/t.steps,1);t.spline.getPoint(r,t.tmpV2),e.set(t.tmpV2.x,0,t.tmpV2.y);var i=t.v3object.rotation,o=t.spline.getTangent(r).angle();i.set(0,-o,0);var a=r>=1&&t.willDie;if(t.creatureObject.rotation.x=a?Math.PI/2:0,t.creatureObject.position.y=a?2:0,t.blobMaterial.opacity=a?.3:1,t.blob.castShadow=!a,t.rightEye.visible=!a,t.leftEye.visible=!a,t.rightDeadEye.visible=a,t.leftDeadEye.visible=a,t.showEnergyIndicator){var s=lo(t.creature,r);t.energyIndicator.material.color.set(s.num()),t.energyIndicator.material.opacity=s.alpha()}if(t.showFoodIndicator){for(var c=t.creature.foods_eaten,l=t.foodIndicators.children,u=0,d=l.length;u<d;u++){var p=c[u];l[u].visible=!!(p&&p[0]<n)}var f=t.threeVue.camera.getWorldDirection(fo).projectOnPlane(mo),h=f.angleTo(ho),m=f.cross(ho).y<0?1:-1;t.foodIndicators.rotation.y=h*m-t.v3object.rotation.y}}))},methods:{createObject:function(){var t=this;this.tmpV2=new Er["Vector2"],this.v3object=new Er["Group"],this.creatureObject=to(),this.v3object.add(this.creatureObject);var e=this.v3object.getObjectByName("blob");this.blob=e,e.material=e.material.clone(),this.blobMaterial=e.material,this.blobMaterial.transparent=!0,this.registerDisposables(this.creatureObject.material),this.leftEye=this.creatureObject.getObjectByName("left-eye"),this.rightEye=this.creatureObject.getObjectByName("right-eye"),this.leftDeadEye=this.creatureObject.getObjectByName("left-dead-eye"),this.rightDeadEye=this.creatureObject.getObjectByName("right-dead-eye");var n=this.visionIndicator=no.clone(!1);this.v3object.add(n);var r=this.energyIndicator=ro.clone(!1);r.material=ro.material.clone(),this.registerDisposables([r.material]),this.v3object.add(r);var i=this.speedIndicator=so();i.position.set(9,.05,0),this.v3object.add(i);var o=this.foodIndicators=new Er["Group"];o.position.set(0,.2,0),this.v3object.add(o),this.$watch("creature",(function(){for(var e=t.creature.foods_eaten.length,n=o.children.length;n<e;n++){var r=io.clone(!1);r.visible=!1,r.position.set(0,0,4).applyAxisAngle(new Er["Vector3"](0,1,0),-.6*n),o.add(r),t.registerDisposables(r)}}),{immediate:!0})},updateObjects:function(){var t=this.creature.sense_range[0];if(this.visionIndicator.scale.set(t,t,t),this.visionIndicator.visible=this.showSightIndicator,this.speedIndicator.visible=this.showSpeedIndicator,this.showSpeedIndicator){var e=uo(this.creature);this.speedIndicator.children.forEach((function(t,n){t.visible=n<e}))}var n=this.creature.size[0]/10;this.creatureObject.scale.set(n,n,n),this.energyIndicator.visible=this.showEnergyIndicator,this.foodIndicators.visible=this.showFoodIndicator,this.assignProps(this.blobMaterial,po)}}},vo=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"creature-status",on:{click:function(e){t.open=!t.open}}},[r("transition",{attrs:{name:"boing",mode:"out-in",appear:"","appear-class":"boing-appear","appear-to-class":"boing-appear-to"}},[t.open?r("div",{key:"bubble",staticClass:"bubble"},[r("div",{staticClass:"bg"},[r("img",{attrs:{src:n("ff87"),width:"160"}})]),r("transition",{attrs:{name:"boing",mode:"out-in"}},[t.status?r("div",{key:t.status,staticClass:"status-icon"},[r("img",{staticClass:"status",attrs:{src:t.iconUrl,width:"160"}})]):t._e()])],1):r("div",{key:"collapsed",staticClass:"collapsed"},[r("img",{attrs:{src:n("ba90"),width:"160"}})])])],1)},go=[],yo={wandering:n("daed"),"low energy":n("c6be"),"see food":n("584f"),"see prey":n("160b"),"running away":n("b542"),satisfied:n("a7c7"),reproduce:n("53b0")},wo={name:"CreatureStatus",inject:["getStep","threeVue"],props:{creature:Object},data:function(){return{status:null,open:!0}},created:function(){var t=this;this.beforeDraw((function(){if(t.creature){var e=!1,n=0|t.getStep(),r=t.creature.status_history;n>=r.length&&(n=r.length-1,e=!0);var i=r[n];e&&"satisfied"==i&&(i="reproduce"),t.status=i}}))},watch:{},computed:{iconUrl:function(){return yo[this.status]}},methods:{beforeDraw:function(t){var e=this;this.threeVue.$on("beforeDraw",t),this.$on("hook:beforeDestroy",(function(){e.threeVue.$off("beforeDraw",t)}))}}},Oo=wo,jo=(n("a872"),Object(b["a"])(Oo,vo,go,!1,null,"05ee1011",null)),Co=jo.exports,xo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tour-steps"},[n("TourStep",{attrs:{"button-text":"get started",step:1},scopedSlots:t._u([{key:"controls",fn:function(e){return[n("div",{staticClass:"level is-mobile"},[n("div",{staticClass:"level-left"},[n("b-field",[n("b-button",{staticClass:"is-text skip",on:{click:e.skip}},[t._v("skip")])],1)],1),n("div",{staticClass:"level-right"},[n("b-field",[n("b-button",{staticClass:"is-primary",on:{click:e.next}},[t._v("get started")])],1)],1)])]}}])},[n("div",{staticClass:"has-text-centered"},[n("p",{staticClass:"is-size-5"},[t._v("Welcome to the")]),n("h5",{staticClass:"title is-size-3 has-text-primary"},[t._v("Evolution Simulator")]),n("h6",{staticClass:"title is-size-6"},[t._v("By MinuteLabs"),n("br"),t._v("(concept by Primer Learning)")]),n("br")]),n("p",[t._v("Before we dive into the deep end, let's take a little look around...")])]),n("TourStep",{attrs:{step:2}},[n("TypewriterTextTransition",[n("p",[t._v("This is blob world. Life is simple here.")])])],1),n("TourStep",{attrs:{step:3}},[n("TypewriterTextTransition",[n("p",[t._v("If you click/tap on a blob, you can follow it and see what it's thinking.")])])],1),n("TourStep",{attrs:{step:4}},[n("TypewriterTextTransition",[n("p",[t._v("Blobs use up energy searching for food and smaller blobs to eat. They need one\npiece of food to survive to the next generation.")])])],1),n("TourStep",{attrs:{step:5}},[n("TypewriterTextTransition",[n("p",[t._v("Although they'll settle for one food and head home if they're low on energy,\nwith two food they can reproduce.")])])],1),n("TourStep",{attrs:{"button-text":"let's watch them evolve!","is-last":"",step:6}},[n("TypewriterTextTransition",[n("p",[t._v("In the next generation, when they reproduce, their offspring will be slightly different.\nTheir traits are mutated in a random way that can be controlled in the settings.")]),n("p",[t._v("(Find more details in the about page)")])])],1)],1)},Po=[],_o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.step===t.stepNumber?n("div",{staticClass:"tour-step"},[n("div",{staticClass:"content"},[t._t("default")],2),n("div",{staticClass:"controls"},[t._t("controls",[n("div",{staticClass:"level is-mobile"},[n("div",{staticClass:"level-left"},[t.isLast?t._e():n("b-field",[n("p",{staticClass:"control"},[n("b-button",{staticClass:"is-info",on:{click:t.skip}},[t._v("skip")])],1)])],1),n("div",{staticClass:"level-right"},[n("b-field",{attrs:{position:"is-right"}},[1!==t.step?n("p",{staticClass:"control"},[n("b-button",{staticClass:"btn-dark",on:{click:t.back}},[t._v("back")])],1):t._e(),n("p",{staticClass:"control"},[n("b-button",{staticClass:"is-primary",on:{click:t.next}},[t._v(t._s(t.buttonText))])],1)])],1)])],{skip:t.skip,next:t.next,back:t.back})],2)]):t._e()},ko=[];function So(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Do(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?So(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):So(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Eo={name:"TourStep",props:{buttonText:{default:"tell me more"},step:Number,isLast:Boolean},data:function(){return{}},mounted:function(){},watch:{},computed:{stepNumber:function(){return 0|this.$route.query.intro}},methods:{skip:function(){this.$router.push(Do({},this.$route,{query:{intro:""}}))},back:function(){this.$router.push(Do({},this.$route,{query:{intro:this.stepNumber-1}}))},next:function(){if(this.isLast)return this.skip();this.$router.push(Do({},this.$route,{query:{intro:this.stepNumber+1}}))}}},$o=Eo,Io=(n("bb2e"),Object(b["a"])($o,_o,ko,!1,null,"2e2473f9",null)),To=Io.exports,Mo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{appear:"",css:!1},on:{appear:t.transitionText,"appear-cancelled":t.cancelTransition}},[n("div",{ref:"content"},[t._t("default")],2)])},Fo=[],zo=n("dd61"),Ao=n.n(zo),No=n("d180"),Vo=n.n(No),Go={name:"TypewriterTextTransition",props:{lps:{type:Number,default:50}},data:function(){return{}},created:function(){this.player=U.a.Player({totalTime:1})},beforeDestroy:function(){this.cancelTransition()},watch:{},computed:{},methods:{transitionText:function(t,e){var n=this,r=t.getElementsByTagName("p"),i=r.length,o=Ao()(r,(function(t){return t.innerText})),a=o.map((function(t){return t.length})),s=Vo()(a);Array.prototype.forEach.call(r,(function(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;t.style.display="inline-block",t.style.width=n+"px",t.style.height=r+"px",t.innerText=""})),this.player.totalTime=1e3*s/this.lps,this.player.on("update",(function(){var t=n.player.time/n.player.totalTime,e=Math.round(t*s),c=0,l=e-a[0];while(l>0)r[c].innerText=o[c],c++,l-=a[c];var u=r[c],d=a[c]+l,p=o[c].substr(0,d),f=o[c].substr(d).replace(/\s+.*/,"");for(u.innerHTML=p+'<span class="hide">'.concat(f,"</span>"),c+=1;c<i;c++)r[c].innerHTML='<span class="hide">x</span>'})),this.player.on("end",(function(){for(var t=0;t<i;t++)r[t].innerHTML=o[t];e(),n.player.off(!0)})),this.player.seek(0),this.player.togglePause(!1)},cancelTransition:function(){this.player.togglePause(!0),this.player.off(!0)}}},Lo=Go,Bo=(n("d019"),Object(b["a"])(Lo,Mo,Fo,!1,null,"7699a6b4",null)),Ro=Bo.exports,Ho={name:"TourSteps",props:{},components:{TourStep:To,TypewriterTextTransition:Ro},data:function(){return{}},mounted:function(){},watch:{},computed:{stepNumber:function(){return 0|this.$route.query.intro}},methods:{}},Wo=Ho,Xo=(n("85d5"),Object(b["a"])(Wo,xo,Po,!1,null,"6fc9acb1",null)),Yo=Xo.exports;function qo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Uo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qo(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Zo=n("ae37")(Er),Qo=Gt()(ee.blue).desaturate(.5).num(),Ko={v3Renderer:Nr,fadeTransition:Rr,Gestures:Hr,v3Scene:qr,v3Camera:ti,v3Light:li,v3Group:fi,v3Dom:gi,v3Grid:ji,v3Plane:Ei,v3Box:zi,v3Fog:Gi,Food:Wi,Creature:bo,CreatureStatus:Co,Tour:Yo},Jo=Uo({steps:function(){return this.generation.steps},generation:function(){return this.getCurrentGeneration()},creatureIndicators:function(){return{showSightIndicator:this.sightIndicators,showEnergyIndicator:this.energyIndicators,showFoodIndicator:this.foodIndicators}},tourStepNumber:function(){return 0|this.$route.query.intro},showWorld:function(){return this.generation&&!this.hideStage},speedColorScale:function(){return Gt.a.scale([Gt()(ee.red).desaturate(4),Gt()(ee.red).desaturate(.5)]).mode("lab").domain([this.statistics.speed.min,this.statistics.speed.max])}},Object(l["c"])("simulation",{getCurrentGeneration:"getCurrentGeneration",statistics:"statistics"})),ta={followCreatureId:function(){this.checkFollowCreature()}},ea=new Er["Vector3"],na={debug:function(){var t=new Er["AxesHelper"](5);this.scene.add(t)},getCreatureColor:function(t){return Le[t]||Qo},initCamera:function(){var t=this,e=this.$refs.renderer.renderer,n=this.camera=this.$refs.camera.v3object,r=this.controls=new Zo(n,e.domElement);r.rotateSpeed=.2,r.zoomSpeed=.5,r.panSpeed=.8,r.enableZoom=!0,r.enablePan=!1,r.enableDamping=!0,r.dampingFactor=.1,r.minZoom=1,r.maxZoom=500,r.maxDistance=4e3;var i=.001;r.minPolarAngle=i,r.maxPolarAngle=Math.PI-i,r.addEventListener("start",(function(){t.cameraDragging=!0})),r.addEventListener("end",(function(){t.cameraDragging=!1}))},draw:function(){this.followCreature(),this.transitionCamera&&!this.cameraDragging&&this.camera.position.lerp(this.cameraGoal,.05),this.controls.target.copy(this.cameraFocusGoal),this.controls.update(),this.$refs.renderer.draw()},followCreature:function(){var t=this.$refs.cameraGoal&&this.$refs.cameraGoal[0],e=this.$refs.cameraFocusGoal&&this.$refs.cameraFocusGoal[0];t&&(this.cameraGoal.setFromMatrixPosition(t.v3object.matrixWorld),ea.setFromMatrixPosition(e.v3object.matrixWorld),this.cameraFocusGoal.lerp(ea,.05))},checkFollowCreature:function(){var t=this;clearTimeout(this.followTO);var e=void 0!==this.followCreatureId;e?this.transitionCamera=!0:(this.cameraGoal.fromArray(this.persCameraPos),this.cameraFocusGoal.copy(this.scene.position),this.followTO=setTimeout((function(){t.transitionCamera=!1}),1500))},onResize:function(){var t=this.$el;this.viewWidth=t.offsetWidth,this.viewHeight=t.offsetHeight},toViewCoords:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=.5*this.gridSize;return[t-n,0,e-n]},tapCreature:function(t){var e=t.intersects;if(e.length){var n=e[0].object,r=Yn()(this.$refs.v3Creatures,(function(t){return t.v3object===n.parent.parent})),i=this.generation.creatures[r];this.$emit("tap-creature",{creature:i,index:r})}},onHover:ct()((function(t){var e=t.intersects,n=this.renderer;if(n.removeOutline(),e.length){var r=e[0].object,i=Yn()(this.$refs.v3Creatures,(function(t){return t.v3object===r.parent.parent})),o=this.generation.creatures[i].id;n.addOutline(r),this.$emit("creature-hover",{index:i,id:o,creature:r})}}),100),initTour:function(){var t=this,e=U()({cameraPosition:{type:"Vector3",default:new Er["Vector3"](0,4e3,300),easing:U.a.Easing.Quadratic.InOut},cameraRotation:{type:"Vector3",default:new Er["Vector3"](0,0,0)},hideStage:!1,tourPosition:[0,0,-100]});e.add({},{id:"step-1",time:0}),e.add({tourPosition:[0,25,-100]},{time:"1s",duration:"1s",easing:U.a.Easing.Quadratic.InOut}),e.add({cameraPosition:(new Er["Vector3"]).fromArray(this.persCameraPos)},{id:"step-2",time:"5s",duration:"5s"}),e.add({tourPosition:[0,0,-100]},{id:"step-6",time:"6s",duration:"1s",easing:U.a.Easing.Quadratic.InOut}),this.tourActive=!1;var n=U.a.Player({manager:e});e.on("update",(function(){if(t.tourActive){var n=e.state;t.transitionCamera||t.camera.position.copy(n.cameraPosition),t.hideStage=n.hideStage,t.tourPosition=n.tourPosition}})),this.$watch("tourStepNumber",(function(r){if(!r)return n.seek(n.totalTime),t.tourActive=!1,void(t.controls.enabled=!0);t.tourActive=!0,t.controls.enabled=!1;var i=e.getFrame("step-"+r);while(!i&&r>0)r--,i=e.getFrame("step-"+r);n.playTo(i.meta.time)}),{immediate:!0}),this.$on("hook:beforeDestroy",(function(){n.destroy(),e.off(!0)}))}},ra={name:"GenerationViewer",props:{generationIndex:{type:Number,default:0},stepTime:Number,sightIndicators:Boolean,speedIndicators:Boolean,energyIndicators:Boolean,foodIndicators:Boolean,followCreatureId:String},inject:["getTime"],data:function(){return{viewWidth:500,viewHeight:500,gridSize:500,origin:[0,0,0],persCameraPos:[600,300,600],orthCameraPos:[100,50,100],shadowCamera:{near:100,far:380,left:-280,right:280,top:280,bottom:-280},cameraGoal:new Er["Vector3"],cameraFocusGoal:new Er["Vector3"],interactiveObjects:["blob"],highlightColor:Gt()(ee.red).num(),hideStage:!1,tourPosition:[0,0,-100]}},components:Ko,computed:Jo,watch:ta,methods:na,mounted:function(){var t=this;this.renderer=this.$refs.renderer,this.scene=this.renderer.scene,this.$onResize((function(){return t.onResize()})),this.onResize(),this.initCamera(),this.checkFollowCreature(),this.initTour();var e=!1,n=new Er["Clock"],r=function r(){e||(requestAnimationFrame(r),t.draw(1e3*n.getDelta()))};this.$on("hook:beforeDestroy",(function(){e=!0})),r()}},ia=ra,oa=(n("2f17"),Object(b["a"])(ia,Sr,Dr,!1,null,"afdd8940",null)),aa=oa.exports,sa=function(){var t,e=this,n=e.$createElement,r=e._self._c||n;return r("div",{staticClass:"floating-panel",class:(t={"is-open":e.isOpen},t["direction-"+e.direction]=!0,t)},[r("div",{staticClass:"activator",on:{click:function(t){e.isOpen=!0}}},[e._t("activator",[r("b-icon",{staticClass:"icon-btn",attrs:{icon:e.openIcon,size:e.size}})])],2),r("transition",{attrs:{name:"fade"}},[e.isOpen?r("div",{staticClass:"panel",on:{click:function(t){e.closeOnClick&&(e.isOpen=!1)}}},[r("div",{staticClass:"close",on:{click:function(t){t.stopPropagation(),e.isOpen=!1}}},[e._t("deactivator",[r("b-icon",{staticClass:"icon-btn",attrs:{icon:e.closeIcon,size:e.size}})])],2),e._t("default")],2):e._e()])],1)},ca=[],la={},ua={closeIcon:function(){switch(this.direction){case"right":return"menu-left";case"left":return"menu-right";case"up":return"menu-down";case"down":return"menu-up"}},openIcon:function(){switch(this.direction){case"right":return"menu-right";case"left":return"menu-left";case"up":return"menu-up";case"down":return"menu-down"}},isOpen:{get:function(){return void 0===this.open?this.openState:this.open},set:function(t){this.openState=t,this.$emit("update:open",t)}}},da={},pa={},fa={name:"FloatingPanel",props:{open:{type:Boolean,default:void 0},closeOnClick:{type:Boolean,default:!0},size:String,direction:{type:String,validator:function(t){return["right","up","left","down"].indexOf(t)>-1},default:"down"}},data:function(){return{openState:!1}},components:la,computed:ua,watch:da,methods:pa},ha=fa,ma=(n("00df"),Object(b["a"])(ha,sa,ca,!1,null,"1b033d01",null)),ba=ma.exports,va=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"creature-flower-chart"},[n("div",{staticClass:"bg"},[n("FlowerChart",{attrs:{data:t.traitData,"data-ranges":t.generationRanges,size:t.size,colors:t.colors,"show-center":!1,"show-values":!1,"values-outside":!0}})],1),n("label",[n("span",[t._v("Current Creature ")]),n("b-tooltip",{attrs:{label:"Flower diagram is sized relative to averages in the current generation",position:"is-left",multilined:""}},[n("b-icon",{attrs:{icon:"help-circle",size:"is-small"}})],1)],1)])},ga=[],ya=n("1d32"),wa=n.n(ya);function Oa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ja(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oa(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ca=["age_at_death"],xa={FlowerChart:qt},Pa=ja({colors:function(){return{petals:this.traitColors}},creature:function(){var t=this.getCurrentGeneration();return en()(t.creatures,{id:this.id})},shownTraits:function(){return wa()(this.traits,(function(t){return Ca.indexOf(t)>-1}))},traitData:function(){var t=this;return{center:0,petals:this.shownTraits.map((function(e){return G()(t.creature[e],"0",t.creature[e])}))}},generationRanges:function(){var t=this.generationStats;return{center:[0,1],petals:this.shownTraits.map((function(e){return[t[e].min,t[e].max]}))}},generationStats:function(){return this.statistics?this.statistics.generation_statistics[this.currentGenerationIndex]:{}}},Object(l["c"])("simulation",{statistics:"statistics",getCurrentGeneration:"getCurrentGeneration",currentGenerationIndex:"currentGenerationIndex",traits:"traits",traitColors:"traitColors"})),_a={},ka={},Sa={name:"CreatureFlowerChart",props:{id:String,size:{type:Number,default:200}},data:function(){return{}},components:xa,computed:Pa,watch:_a,methods:ka},Da=Sa,Ea=(n("7d69"),Object(b["a"])(Da,va,ga,!1,null,"289092de",null)),$a=Ea.exports;function Ia(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ta(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ia(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ia(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ma={name:"ViewScreen",props:{showConfig:Boolean,showIntro:Number},provide:function(){var t=this;return{getTime:function(){return t.player.time},getStep:function(){return t.player.time/t.stepTime}}},data:function(){return{paused:!0,playthrough:!1,progress:0,showSightIndicator:!1,showSpeedIndicator:!1,showEnergyIndicator:!1,showFoodIndicator:!1,followCreature:!1,followCreatureId:0,prate:1}},components:{AudioScrubber:wt,GenerationViewer:aa,FloatingPanel:ba,CreatureFlowerChart:$a},created:function(){this.player=U.a.Player({totalTime:1})},deactivated:function(){this.player.togglePause(!0)},beforeDestroy:function(){this.player.togglePause(!0),this.player.destroy()},mounted:function(){var t=this;this.player.on("update",(function(){t.progress=t.player.time/t.totalTime*100})),this.player.on("togglePause",(function(){t.player.paused!==t.paused&&(t.paused=t.player.paused)})),this.player.on("end",(function(){t.playthrough&&t.nextGeneration()}))},computed:Ta({stepTime:function(){return 100},playbackSpeed:{get:function(){var t=this.player.playbackRate+1e-40*this.prate;return 2*Math.log2(t)+7},set:function(t){this.player.playbackRate=Math.pow(2,(t-7)/2),this.prate=this.player.playbackRate}},totalTime:function(){return this.generation?this.stepTime*this.generation.steps:1},generation:function(){return this.getCurrentGeneration()},genIndex:{get:function(){return this.generationIndex},set:function(t){this.loadGeneration(t)}},tourStepNumber:function(){return 0|this.$route.query.intro}},Object(l["c"])("simulation",{getCurrentGeneration:"getCurrentGeneration",generationIndex:"currentGenerationIndex",stats:"statistics",isLoading:"isLoading"})),watch:{totalTime:function(){var t=this.player.time/this.player.totalTime;this.player.totalTime=this.totalTime,this.player.time=this.totalTime*t},tourStepNumber:function(t,e){t>=2?(this.playthrough=!0,this.playbackSpeed=2,this.paused=!1):(this.playbackSpeed=5,this.paused=!0,e>1&&!t&&(this.playthrough=!0,this.genIndex=0,this.paused=!1)),2===t&&(this.genIndex=0),3===t&&(this.genIndex=0,this.followCreatureId=this.generation.creatures[2].id),4===t?(this.genIndex=0,this.showEnergyIndicator=!0):this.showEnergyIndicator=!1,this.followCreature=3===t},paused:function(){this.player.togglePause(this.paused)},genIndex:function(t,e){var n=this;if(t!==e){var r=Yn()(this.generation.creatures,(function(t){return t.id===n.followCreatureId}));r<0&&(this.followCreature=!1,this.followCreatureId=null),this._inactive||(this.paused=!0,this.player&&this.player.seek(0),this.playthrough&&setTimeout((function(){n.paused=!1}),500))}},followCreature:function(t){t&&!this.followCreatureId&&(this.followCreatureId=this.generation.creatures[0].id)}},methods:{togglePlay:function(){this.paused=!this.paused},updateTime:function(t){t!==this.player.time&&this.player.seek(t)},onScrub:function(t){this.updateTime(t*this.totalTime/100)},onScrubStart:function(){this.wasPaused=this.paused,this.paused=!0},onScrubEnd:function(){this.paused=this.wasPaused},loadGeneration:function(t){this.$store.dispatch("simulation/loadGeneration",t)},prevGeneration:function(){this.generation&&(this.genIndex<=0||(this.genIndex-=1))},nextGeneration:function(){this.generation&&(this.genIndex>=this.stats.num_generations-1||(this.genIndex+=1))},fixLayout:function(){var t=this.$refs.generationViewer;t&&t.onResize()}}},Fa=Ma,za=(n("06cf"),Object(b["a"])(Fa,_r,kr,!1,null,"7b6932ac",null)),Aa=za.exports;function Na(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Va(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Na(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}r["default"].use(L["a"]);var Ga,La=!1,Ba=function(t){return Va({},t.params,{showConfig:!!t.query.cfg,showIntro:0|t.query.intro,generationIndex:t.params.generationIndex,hideControls:"about"===t.name||"stats"===t.name,hideSettings:"about"===t.name})},Ra=new L["a"]({routes:[{path:"/",name:"home",component:St,redirect:{name:"viewscreen",params:{generationIndex:1,intro:1}},meta:{},children:[]},{path:"/s/:generationIndex",name:"simulation",redirect:function(t){return{name:"viewscreen",params:{generationIndex:+G()(t,"params.generationIndex",1)},append:!0}},component:Ln,props:Ba,children:[{path:"viewer",name:"viewscreen",component:Aa,props:Ba,beforeEnter:function(t,e,n){if(La)return n();La=!0,n(Va({},t,{query:{intro:1},append:!0,replace:!0}))}},{path:"stats",name:"stats",component:Pr,props:!0},{path:"about",name:"about",component:Kt}]},{path:"*",redirect:{name:"viewscreen",params:{generationIndex:1}}}]}),Ha=Ra,Wa=n("98dc"),Xa=n.n(Wa),Ya=n("a125"),qa=n.n(Ya),Ua=5e3,Za=0,Qa={errors:[],infos:[]},Ka={namespaced:!1,state:Qa,getters:{hasError:function(t){return t.errors.length>0},hasInfo:function(t){return t.infos.length>0},errors:function(t){return t.errors},infos:function(t){return t.infos}},actions:{error:function(t,e){var n=t.commit,r=e.error,i=e.context,o=e.timeout;return n("addError",{error:r,context:i,timeout:o}),console.error(r),r},clearError:function(t,e){var n=t.commit,r=e.id;n("removeError",r)},clearErrors:function(t){var e=t.commit;e("clearErrors")},info:function(t,e){var n=t.commit,r=e.message,i=e.timeout;n("addInfo",{message:r,timeout:i})},clearInfo:function(t,e){var n=t.commit,r=e.id;n("removeInfo",r)},clearInfos:function(t){var e=t.commit;e("clearInfos")}},mutations:{clearAll:function(t){t.errors=[],t.infos=[]},addError:function(t,e){var n=e.error,r=e.context,i=e.timeout;t.errors.push({id:Xa()("error-"),error:n,context:r,timeout:i||Za})},removeError:function(t,e){t.errors=qa()(t.errors,[{id:e}],"id")},clearErrors:function(t){t.errors=[]},addInfo:function(t,e){var n=e.message,r=e.timeout;t.infos.push({id:Xa()("info-"),message:n,timeout:r||Ua})},removeInfo:function(t,e){t.infos=qa()(t.infos,[{id:e}],"id")},clearInfos:function(t){t.infos=[]}}},Ja=(n("96cf"),n("3b8d")),ts=n("75fc"),es=n("0644"),ns=n.n(es),rs=n("3d15"),is=n("1579");function os(){return Ga=Ga||Object(rs["a"])(is()),this instanceof os?Object(rs["a"])(is()):Ga}function as(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ss(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?as(Object(n),!0).forEach((function(e){Object(c["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):as(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var cs=os(),ls=["default"];function us(){return["age","age_at_death","speed","size","sense_range"]}var ds={speed:[10,.5],size:[10,.5],sense_range:[20,.5],reach:[1,0],flee_distance:[1e12,0],life_span:[1e4,0],energy:500,species:"default"},ps={isBusy:!1,isRestarting:!1,isContinuing:!1,startedAt:0,computeTime:0,statsSpeciesFilter:0,config:{seed:118,food_per_generation:[[0,50]],max_generations:50,size:500,preset:{name:"default",options:{step:10}}},creatureConfigs:{default:{count:50,name:"Blue",active:!0,template:ss({},ds)},orange:{count:1,name:"Orange",active:!1,template:ss({},ds,{sense_range:[50,.5],species:"orange"})},pink:{count:1,name:"Pink",active:!1,template:ss({},ds,{size:[9,.5],speed:[9,.5],species:"pink"})}},canContinue:!0,statistics:null,currentGenerationIndex:-1,getCurrentGeneration:function(){return null}};function fs(t){return"string"===typeof t?+t:t}function hs(t){return Object.keys(t).reduce((function(e,n){var r=t[n];return Array.isArray(r)?r=r.map(fs):"species"!==n&&(r=fs(r)),e[n]=r,e}),{})}function ms(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ds,e=hs(t);return ss({state:"ACTIVE",foods_eaten:[],age:0,energy_consumed:0,pos:[0,0],home_pos:[0,0],movement_history:[[0,0]],status_history:[],id:"00000000000000000000000000000000"},e)}function bs(t,e){for(var n=[],r=Object.keys(e),i=0,o=r;i<o.length;i++){var a=o[i],s=e[a];s.active&&n.push({count:0|s.count,template:ms(s.template)})}return n}var vs={namespaced:!0,state:ps,getters:{isLoading:function(t){return t.isRestarting},isContinuing:function(t){return t.isContinuing},isBusy:function(t){return t.isBusy},canContinue:function(t){return t.canContinue},presets:function(){return ls},config:function(t){return t.config},speciesKeys:function(t){return Object.keys(t.creatureConfigs)},creatureConfig:function(t){return function(e){return t.creatureConfigs[e]}},creatureTemplate:function(t){return function(e){return t.creatureConfigs[e].template}},getCurrentGeneration:function(t){return t.getCurrentGeneration},currentGenerationIndex:function(t,e,n){return n.route?+n.route.params.generationIndex-1:0},statistics:function(t){return t.statistics},traits:function(t){return us(t.config.preset.name)},traitColors:function(t,e){return e.getTraitColors(e.traits)},getTraitColors:function(){return function(t){return t.map((function(t){return ne[t]}))}},speciesFilterList:function(t){var e=Object.keys(t.creatureConfigs).filter((function(e){return t.creatureConfigs[e].active})).map((function(e){return[e,t.creatureConfigs[e].name+" Blobs"]}));return[[null,"All"]].concat(Object(ts["a"])(e))},speciesFilterKey:function(t,e){return e.speciesFilterList[t.statsSpeciesFilter][0]}},actions:{run:function(){var t=Object(Ja["a"])(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,s,c,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.state,r=e.dispatch,i=e.commit,o=e.getters,a=!(l.length>1&&void 0!==l[1])||l[1],!n.isBusy){t.next=4;break}return t.abrupt("return",Promise.reject(new Error("Busy")));case 4:return s=a?1:o.currentGenerationIndex+1,c=n.config.max_generations-s,i("start",!0),t.prev=7,t.next=10,cs.initSimulation(n.config,bs(n.config.preset.name,n.creatureConfigs));case 10:return t.next=12,cs.advanceSimulation(s);case 12:return t.t0=i,t.next=15,cs.canContinue();case 15:return t.t1=t.sent,t.t2={canContinue:t.t1},(0,t.t0)("setMeta",t.t2),t.next=20,r("getStats");case 20:return t.next=22,r("loadGeneration",a?0:o.currentGenerationIndex);case 22:t.next=27;break;case 24:t.prev=24,t.t3=t["catch"](7),r("error",{error:t.t3,context:"while calculating simulation results"},{root:!0});case 27:return t.prev=27,i("stop"),t.finish(27);case 30:c&&o.canContinue&&r("continue",c);case 31:case"end":return t.stop()}}),t,null,[[7,24,27,30]])})));function e(e){return t.apply(this,arguments)}return e}(),continue:function(){var t=Object(Ja["a"])(regeneratorRuntime.mark((function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.state,i=e.getters,o=e.dispatch,a=e.commit,!r.isBusy){t.next=3;break}return t.abrupt("return",Promise.reject(new Error("Busy")));case 3:if(i.canContinue){t.next=5;break}return t.abrupt("return",Promise.reject(new Error("No Results")));case 5:return a("start"),t.prev=6,t.next=9,cs.advanceSimulation(0|n||r.config.max_generations);case 9:return t.t0=a,t.next=12,cs.canContinue();case 12:return t.t1=t.sent,t.t2={canContinue:t.t1},(0,t.t0)("setMeta",t.t2),t.next=17,o("getStats");case 17:t.next=22;break;case 19:t.prev=19,t.t3=t["catch"](6),o("error",{error:t.t3,context:"while calculating simulation results"},{root:!0});case 22:return t.prev=22,a("stop"),t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[6,19,22,25]])})));function e(e,n){return t.apply(this,arguments)}return e}(),loadGeneration:function(){var t=Object(Ja["a"])(regeneratorRuntime.mark((function t(e,n){var r,i,o,a,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.state,i=e.commit,o=e.getters,r.statistics){t.next=3;break}return t.abrupt("return");case 3:return n=Math.max(0,Math.min(n,r.statistics.num_generations-1)),n!==o.currentGenerationIndex&&(a=Ha.history.current,s=a?a.params:{},c=a?a.query:{},Ha.replace({params:ss({},s,{generationIndex:n+1}),query:c})),i("setGenerationIndex",n),t.t0=i,t.next=9,cs.getGeneration(n);case 9:t.t1=t.sent,(0,t.t0)("setGeneration",t.t1);case 11:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),setStatsFilter:function(){var t=Object(Ja["a"])(regeneratorRuntime.mark((function t(e,n){var r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,i=e.dispatch,r("setSpeciesFilter",n),t.next=4,i("getStats");case 4:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),getStats:function(){var t=Object(Ja["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.getters,t.t0=n,t.next=4,cs.getStatistics(r.speciesFilterKey);case 4:t.t1=t.sent,(0,t.t0)("setStatistics",t.t1);case 6:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),setConfig:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e("setConfig",ns()(n))},setCreatureConfig:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e("setCreatureConfig",ns()(n))},setCreatureTemplate:function(t){var e=t.commit,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e("setCreatureTemplate",ns()(n))}},mutations:{start:function(t,e){t.isBusy=!0,t.isRestarting=!!e,t.isContinuing=!e,t.computeTime=0,t.startedAt=performance.now()},stop:function(t){t.isBusy=!1,t.isRestarting=!1,t.isContinuing=!1,t.computeTime=performance.now()-t.startedAt,t.startedAt=0},setGenerationIndex:function(t,e){t.currentGenerationIndex=0|e},setMeta:function(t,e){Object.keys(e).forEach((function(n){t[n]=e[n]}))},setStatistics:function(t,e){t.statistics=Object.freeze(e)},setGeneration:function(t,e){var n=Object.freeze(e);t.getCurrentGeneration=function(){return n}},setConfig:function(t,e){t.config=ss({},t.config,{},hs(e))},setCreatureConfig:function(t,e){var n=e.species||"default";t.creatureConfigs[n]=ss({},t.creatureConfigs[n],{},e)},setCreatureTemplate:function(t,e){var n=e.species||"default";t.creatureConfigs[n]=ss({},t.creatureConfigs[n],{template:ss({},t.creatureConfigs[n].template,{},e)})},setSpeciesFilter:function(t,e){t.statsSpeciesFilter=e}}};r["default"].use(l["a"]);var gs=function(t){t.watch((function(t){return t.route&&t.route.params.generationIndex}),(function(e){void 0!==e&&t.dispatch("simulation/loadGeneration",e-1)}))},ys=new l["a"].Store({strict:!1,plugins:[gs],modules:{alerts:Ka,simulation:vs}}),ws=n("31bd"),Os=(n("28a5"),n("e9a7")),js=n.n(Os),Cs=n("375a"),xs=n.n(Cs),Ps=n("9380"),_s=n.n(Ps),ks=n("e740"),Ss=n.n(ks);function Ds(t){return t.split(" ").map((function(t){return js()(t)})).join(" ")}var Es=[{range:[1,1e3],suffix:"",decimals:0},{range:[1e3,1e6],suffix:"k",decimals:1},{range:[1e6,1e9],suffix:"M",decimals:1},{range:[1e9,1/0],suffix:"B",decimals:1}];function $s(t){if(0===t)return"0";var e=en()(Es,(function(e){return e.range[0]&&t<e.range[1]}));return(t/e.range[0]).toFixed(e.decimals)+e.suffix}function Is(t){t=Math.round(t/1e3);var e=Math.floor(t/3600),n=Math.floor((t-3600*e)/60),r=t-3600*e-60*n,i="";return 0!==e&&(e<10&&(e="0"+e),i=e+":"),n<10&&(n="0"+n),r<10&&(r="0"+r),i+="".concat(n,":").concat(r),i}function Ts(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return t.length<e?t:t.substr(0,e-n.length)+n}var Ms={install:function(t){t.filter("capitalize",js.a),t.filter("kebabCase",xs.a),t.filter("titleCase",Ds),t.filter("startCase",Ss.a),t.filter("filter",_s.a),t.filter("shortNumber",$s),t.filter("truncate",Ts),t.filter("duration",Is)}},Fs=["mousedown","touchstart"],zs=["mousemove","touchmove"],As=["mouseup","touchend"];function Ns(t,e,n){for(var r=0,i=e.length;r<i;r++)t.addEventListener(e[r],n,{passive:!1})}function Vs(t,e,n){for(var r=0,i=e.length;r<i;r++)t.removeEventListener(e[r],n)}function Gs(t,e){var n=e.getBoundingClientRect();return t.changedTouches&&(t=t.changedTouches[0]),{clientX:t.clientX,clientY:t.clientY,layerX:t.clientX-n.left,layerY:t.clientY-n.top}}var Ls={inserted:function(t,e){var n;function r(r){r.preventDefault();var i=Gs(r,t);t.lastCoords=t.firstCoords={x:i.clientX,y:i.clientY},e.value({el:t,first:!0,clientX:i.clientX,clientY:i.clientY,offsetX:0,offsetY:0,layerX:i.layerX,layerY:i.layerY,event:r}),n=t}function i(r){if(t===n){var i=Gs(r,t),o=i.clientX-t.firstCoords.x,a=i.clientY-t.firstCoords.y;r.preventDefault(),t.lastCoords=null,e.value({el:t,last:!0,clientX:i.clientX,clientY:i.clientY,offsetX:o,offsetY:a,layerX:i.layerX,layerY:i.layerY,event:r}),n=null}}function o(r){if(t===n&&(r.preventDefault(),t.lastCoords)){var i=Gs(r,t),o=i.clientX-t.lastCoords.x,a=i.clientY-t.lastCoords.y,s=i.clientX-t.firstCoords.x,c=i.clientY-t.firstCoords.y,l=i.clientX,u=i.clientY;e.value({el:t,deltaX:o,deltaY:a,offsetX:s,offsetY:c,clientX:l,clientY:u,layerX:i.layerX,layerY:i.layerY,event:r}),t.lastCoords={x:i.clientX,y:i.clientY}}}document&&(Ns(t,Fs,r),Ns(document.documentElement,As,i),Ns(document.documentElement,zs,o))},unbind:function(t){Vs(t,Fs),Vs(document.documentElement,As),Vs(document.documentElement,zs)}},Bs={install:function(t){t.directive("drag",Ls)},drag:Ls},Rs=n("8730"),Hs=n.n(Rs),Ws={install:function(t){var e=[];t.prototype.$onResize=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=ct()(t,n);e.push(r),this.$on("hook:activated",(function(){Hs()(e,r),e.push(r),r()})),this.$on("hook:beforeDestroy",(function(){Hs()(e,r)})),this.$on("hook:deactivated",(function(){Hs()(e,r)}))},window.addEventListener("resize",(function(){for(var t=0,n=e.length;t<n;t++)e[t]()}))}},Xs=n("289d"),Ys=n("deba"),qs=(n("5363"),n("fb98"),n("f745"));r["default"].component("VueSlider",bt.a),Object(ws["sync"])(ys,Ha),U.a.registerType({type:"Vector3",default:new Er["Vector3"],interpolator:function(t,e,n){var r=new Er["Vector3"];return r.copy(t),r.lerp(e,n)}});var Us=!0;r["default"].use(N.a,{id:"UA-46248430-1",router:Ha,debug:{enabled:!Us,trace:!1,sendHitTask:Us},autoTracking:{exception:!0,pageviewTemplate:function(t){return{title:"".concat(t.name," | ").concat(qs.title),page:"/".concat(qs.repo).concat(t.path),location:window.location.href}}}}),r["default"].use(Xs["a"],{defaultContainerElement:"#app"}),r["default"].use(Ys["default"]),r["default"].use(Ms),r["default"].use(Bs),r["default"].use(Ws),r["default"].config.productionTip=!1,new r["default"]({render:function(t){return t(z)},router:Ha,store:ys}).$mount("#app")},"584f":function(t,e,n){t.exports=n.p+"img/food.d4978be9.svg"},"664e":function(t,e,n){"use strict";var r=n("f882"),i=n.n(r);i.a},"66cc":function(t,e,n){"use strict";var r=n("cb07"),i=n.n(r);i.a},"6ea1":function(t,e,n){"use strict";var r=n("c9b1"),i=n.n(r);i.a},7164:function(t,e,n){},7593:function(t,e,n){},7671:function(t,e,n){"use strict";var r=n("e5a7"),i=n.n(r);i.a},"778d":function(t,e,n){},"7c9b":function(t,e,n){},"7d69":function(t,e,n){"use strict";var r=n("3c26"),i=n.n(r);i.a},"808b":function(t,e,n){},8133:function(t,e,n){},"85d5":function(t,e,n){"use strict";var r=n("0716"),i=n.n(r);i.a},"913e":function(t,e,n){},"95ee":function(t,e,n){},"97d9":function(t,e,n){},a7a6:function(t,e,n){},a7c7:function(t,e,n){t.exports=n.p+"img/satisfied.8c3f8221.svg"},a872:function(t,e,n){"use strict";var r=n("4c4f"),i=n.n(r);i.a},af7b:function(t,e,n){"use strict";var r=n("2591"),i=n.n(r);i.a},b26b:function(t,e,n){"use strict";var r=n("778d"),i=n.n(r);i.a},b542:function(t,e,n){t.exports=n.p+"img/run.23b7bd46.svg"},b68a:function(t,e,n){t.exports=n.p+"img/logo-dark.956bfae2.png"},b829:function(t,e,n){"use strict";var r=n("3597"),i=n.n(r);i.a},b863:function(t,e,n){},ba90:function(t,e,n){t.exports=n.p+"img/thought-1.fd7e7992.svg"},bb2e:function(t,e,n){"use strict";var r=n("308f"),i=n.n(r);i.a},be1e:function(t,e,n){"use strict";var r=n("7593"),i=n.n(r);i.a},bf82:function(t,e,n){"use strict";var r=n("7c9b"),i=n.n(r);i.a},bff7:function(t,e,n){"use strict";var r=n("f376"),i=n.n(r);i.a},c3ec:function(t,e,n){"use strict";var r=n("95ee"),i=n.n(r);i.a},c6be:function(t,e,n){t.exports=n.p+"img/low-energy.bd2d9234.svg"},c9b1:function(t,e,n){},cb07:function(t,e,n){},ccce:function(t,e,n){},ce03:function(t,e,n){},d019:function(t,e,n){"use strict";var r=n("e5b8"),i=n.n(r);i.a},daed:function(t,e,n){t.exports=n.p+"img/search.6a0055fb.svg"},dce7:function(t,e,n){t.exports=n.p+"img/extinction.47909d1d.svg"},e5a7:function(t,e,n){},e5b8:function(t,e,n){},f376:function(t,e,n){},f745:function(t){t.exports={repo:"evolution-simulator",title:"Evolution Simulator",description:"Watch little blob creatures evolve under natural selection!"}},f882:function(t,e,n){},fb98:function(t,e,n){},ff87:function(t,e,n){t.exports=n.p+"img/thought-2.19350122.svg"}});
//# sourceMappingURL=app.5949cdd0.js.map